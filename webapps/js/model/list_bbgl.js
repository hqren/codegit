function bbgl_read(e){TempdevClientVersionID=e;var t="";t+='<div class="table row"><div class="form-horizontal">',t+='<div class="col-sm-12"><div class="input-group"><input type="text" id="mac" class="form-control" placeholder="\u8bf7\u8f93\u5165MAC\u5730\u5740"><div class="input-group-btn"><button id="serach_button2" class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-search"></i></button></div></div></div>',t+="</div></div>",t+='<table id="table-bbgl_read"></table>',BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u67e5\u770b\u8be6\u60c5",message:t,onshown:function(e){var t=$("#table-bbgl_read");t.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"device/getAllVersionResults.action",dataType:"json",striped:!0,uniqueId:"devClientVersionId",pagination:!0,sortable:!1,sidePagination:"server",queryParams:queryParams_bbgl,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,l){return l+1}},{title:"\u6267\u884c\u8bbe\u5907",field:"mac",align:"center"},{title:"\u8bbe\u5907\u4e0a\u62a5\u7248\u672c\u53f7",field:"version",align:"center",valign:"middle"},{title:"\u4e0b\u53d1\u72b6\u6001",field:"need_set_config",align:"center",valign:"middle",formatter:function(e,t,l){return 0==t.needSetConfig?"\u5f85\u4e0b\u53d1":1==t.needSetConfig?"\u5df2\u4e0b\u53d1":"-"}},{title:"\u5347\u7ea7\u7ed3\u679c",field:"result",align:"center",valign:"middle",formatter:function(e,t,l){return e=String(e),0==String(t.needSetConfig)?"-":""==e?"\u5df2\u4e0b\u53d1\u672a\u8fd4\u56de\u6267\u884c\u7ed3\u679c":"1"==e?"\u6210\u529f":"0"==e?"\u5931\u8d25":"-"}},{title:"\u66f4\u65b0\u65f6\u95f4",field:"updateTimeStr",align:"center",valign:"middle",formatter:function(e,t,l){return new Date(e.replace(/-/g,"/")).format("yyyy-MM-dd HH:mm:ss")}}]}),$("#serach_button2").click(function(){$("#table-bbgl_read").bootstrapTable("refresh")})},buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}function bbgl_fail(e,t){var l="";l+='<table id="table-bbgl_fail">',l+="<thead><tr><th>\u5931\u8d25\u72b6\u6001</th><th>\u72b6\u6001\u63cf\u8ff0</th><th>\u5931\u8d25\u6761\u6570</th><th>\u64cd\u4f5c</th></tr></thead>",l+="<tbody>",l+="<tr><td>-99</td><td>\u5df2\u4e0b\u53d1\u672a\u8fd4\u56de\u6267\u884c\u7ed3\u679c</td><td>"+e+'</td><td><button class="btn btn-primary" type="submit" onclick="bbgl_fail_reset();">\u91cd\u65b0\u4e0b\u53d1</button></td></tr>',l+="<tr><td>0</td><td>\u5931\u8d25</td><td>"+t+'</td><td><button class="btn btn-primary" type="submit" onclick="bbgl_fail_reset();">\u91cd\u65b0\u4e0b\u53d1</button></td></tr>',l+="</tbody>",l+="</table>",BootstrapDialog.show({title:"\u5931\u8d25\u8be6\u60c5",message:l,onshown:function(e){$("#table-bbgl_fail").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}function bbgl_fail_reset(){return!1}function queryParams_bbgl(e){var t={limit:e.limit,offset:e.offset,devClientVersionID:TempdevClientVersionID,mac:$("#mac").val()};return t}var TempdevClientVersionID=0,$table=$("#table-bbgl");$table.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:APIUrl+"getAllVersions.action",dataType:"json",striped:!0,toolbar:"#toolbar",uniqueId:"devClientVersionId",pagination:!0,singleSelect:!1,sortable:!1,sidePagination:"server",columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,l){return l+1}},{title:"\u7248\u672c\u53f7",field:"version",align:"center",valign:"middle"},{title:"\u63cf\u8ff0",field:"description",align:"center",valign:"middle"},{title:"URL",field:"url",align:"center",valign:"middle"},{title:"MD5",field:"checksum",align:"center",valign:"middle"},{title:"\u4e0b\u53d1\u72b6\u6001",field:"underDes",align:"center",valign:"middle"},{title:"\u6267\u884c\u7ed3\u679c",field:"status",align:"center",valign:"middle",formatter:function(e,t,l){var i="";return i+="\u6210\u529f\uff1a"+t.resultSuccess+",\u8fdb\u884c\u4e2d\uff1a"+t.resultFail}},{title:"\u64cd\u4f5c",field:"cz",align:"center",valign:"middle",formatter:function(e,t,l){var i='<button class="btn btn-primary" type="submit" onclick="bbgl_read('+t.devClientVersionId+');">\u67e5\u770b</button>';return i}}]}),$("#bb_add").click(function(){var e="";e+='<div class="row"><div class="col-sm-12"><div id="FormValidator"  class="form-horizontal">',e+='<br><div class="form-group" id="options_zxfs"><label class="col-sm-3 control-label">\u6267\u884c\u65b9\u5f0f</label><div class="col-sm-8"><div class="btn-group" data-toggle="buttons"><label class="btn btn-primary active"><input type="radio" name="options" id="ClickAll" value="1" checked>\u6279\u91cf</label><label class="btn btn-primary"><input type="radio" name="options" id="ClickOne" value="2">\u5206\u7ec4</label></div></div></div>',e+='<div class="form-group"><label class="col-sm-3 control-label">\u7248\u672c\u53f7</label><div class="col-sm-6"><input type="text" id="bb_add_devVersion" name="bb_add_devVersion" class="form-control" placeholder="\u8f93\u5165\u7248\u672c\u53f7"></div></div>',e+='<div class="form-group"><label class="col-sm-3 control-label">\u63cf\u8ff0</label><div class="col-sm-6"><input type="text" id="description" name="description" class="form-control" placeholder="\u8f93\u5165\u63cf\u8ff0\u5185\u5bb9"></div></div>',e+='<div class="form-group"><label class="col-sm-3 control-label">URL</label><div class="col-sm-6"><input type="url" id="bb_add_devClientUrl" name="bb_add_devClientUrl" class="form-control" placeholder="\u8f93\u5165URL"></div></div>',e+='<div class="form-group"><label class="col-sm-3 control-label">MD5</label><div class="col-sm-6"><input type="text" id="bb_add_checksum" name="bb_add_checksum" class="form-control" placeholder="\u8f93\u5165MD5"></div></div>',e+='<div class="form-group" id="SB_All"><label class="col-sm-3 control-label">\u6267\u884c\u8bbe\u5907</label><div class="col-sm-8"><textarea id="macs" name="macs" class="form-control" rows="2"></textarea></div></div>',e+='<div class="form-group" id="SB_One" style="display:none"><label class="col-sm-3 control-label">\u6267\u884c\u8bbe\u5907</label><div class="col-sm-3"><select id="groupId" class="selectpicker form-control"><option value="1">\u5168\u90e8</option><option value="2">\u94c1\u8def</option><option value="3">\u5927\u5df4</option></select></div><div class="col-sm-4" id="select_2" style="display:none;"><select id="groupId2" class="selectpicker form-control" title="\u9009\u62e9\u5382\u5546" multiple></select></div></div>',e+="</div></div></div>",BootstrapDialog.show({title:"\u7248\u672c\u6dfb\u52a0",message:e,onshown:function(e){$(".selectpicker").selectpicker("refresh"),$("#ClickAll").parent().click(function(){$("#SB_All").show(),$("#SB_One").hide()}),$("#ClickOne").parent().click(function(){$("#SB_All").hide(),$("#SB_One").show()}),$("#groupId").change(function(){$("#groupId2").html(""),1!=$(this).val()?($("#select_2").show(),2==$(this).val()&&$("#groupId2").append('<option value="4">\u4e2d\u5174\u9ad8\u8fbe</option>'),3==$(this).val()&&($("#groupId2").append('<option value="5">\u9510\u6377</option>'),$("#groupId2").append('<option value="6">\u50b2\u5929</option>')),$("#groupId2").selectpicker("refresh")):$("#select_2").hide()}),$("#FormValidator").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{bb_add_devVersion:{message:"\u7248\u672c\u53f7\u65e0\u6548",validators:{notEmpty:{message:"\u7248\u672c\u53f7\u4e0d\u80fd\u4e3a\u7a7a"}}},description:{message:"\u63cf\u8ff0\u65e0\u6548",validators:{notEmpty:{message:"\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a"}}},bb_add_devClientUrl:{message:"URL\u65e0\u6548",validators:{notEmpty:{message:"URL\u4e0d\u80fd\u4e3a\u7a7a"}}},bb_add_checksum:{message:"MD5\u65e0\u6548",validators:{notEmpty:{message:"MD5\u4e0d\u80fd\u4e3a\u7a7a"}}},macs:{message:"\u8bbe\u5907\u65e0\u6548",validators:{notEmpty:{message:"\u8bbe\u5907\u4e0d\u80fd\u4e3a\u7a7a"}}}}})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(e){if($("#FormValidator").bootstrapValidator("validate"),$("#FormValidator").data("bootstrapValidator").isValid()){var t,l,i,a;t=$("#bb_add_devVersion").val(),a=$("#description").val(),l=$("#bb_add_devClientUrl").val(),i=$("#bb_add_checksum").val();var o="";o="version="+t+"&description="+a+"&url="+l+"&checksum="+i;var n=$("#options_zxfs input:radio:checked").val();groupIds=$("#groupId2").val(),null==groupIds&&(groupIds=$("#groupId").val()),2==n&&(o+="&groupIds="+groupIds),1==n&&(o+="&macs="+$("#macs").val()),$.ajax({type:"POST",url:APIUrl+"saVeVersion.action",data:o,dataType:"json",success:function(t){$("#table-bbgl").bootstrapTable("refresh",{url:APIUrl+"getAllVersions.action"}),t.success&&e.close(),BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:ConfigCN[t.result],buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}else BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"})}},{label:"\u91cd\u7f6e",action:function(e){$("#FormValidator").data("bootstrapValidator").resetForm(!0)}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})});