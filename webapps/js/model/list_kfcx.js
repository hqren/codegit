function simStatusCN(e){return e=parseInt(e),1==e?"\u5728\u7ebf":2==e?"\u79bb\u7ebf":4==e?"\u672a\u6fc0\u6d3b":"\u65e0\u5361"}function getDeviceByTrainLineByPage(){var e=$("#table-ccdwcx");e.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",dataType:"json",striped:!0,pagination:!0,singleSelect:!1,singleSelect:!0,sortable:!1,sidePagination:"server",queryParams:queryParams_ccdwcx,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,a){return a+1}},{title:"\u8f66\u6b21",field:"trainLine",align:"center",valign:"middle"},{title:"\u8f66\u53a2\u53f7",field:"plateNumber",align:"center",valign:"middle"},{title:"\u7ec4\u522b",field:"trainLineGroup",align:"center",valign:"middle"},{title:"\u8bbe\u5907SN",field:"devMac",align:"center",valign:"middle"},{title:"\u8bbe\u5907\u72b6\u6001",field:"realStatus",align:"center",valign:"middle",formatter:function(e,t,a){var i="";return i=1==e?'\u5728\u7ebf <i class="fa fa-circle realStatus-on"></i>':'\u79bb\u7ebf <i class="fa fa-circle realStatus-off"></i>'}},{title:"\u6700\u540e\u8fde\u63a5\u65f6\u95f4",field:"connectionTime",align:"center",valign:"middle"},{title:"\u53611\u4fe1\u53f7",field:"sim1Signal",align:"center",valign:"middle",formatter:function(e,t,a){var i="";return i=signalStrengthCN(e)}},{title:"\u53611\u72b6\u6001",field:"sim1Status",align:"center",valign:"middle",formatter:function(e,t,a){var i="";return i=simStatusCN(e)}},{title:"\u53612\u4fe1\u53f7",field:"sim2Signal",align:"center",valign:"middle",formatter:function(e,t,a){var i="";return i=signalStrengthCN(e)}},{title:"\u53612\u72b6\u6001",field:"sim2Status",align:"center",valign:"middle",formatter:function(e,t,a){var i="";return i=simStatusCN(e)}},{title:"\u6280\u672f\u652f\u6301",field:"cz",align:"center",valign:"middle",formatter:function(e,t,a){var i="";return i='<button class="btn btn-primary" type="submit" onclick="sendRepairMail(\''+t.devMac+"');\">send</button>"}}]})}function sendRepairMail(e){var t="";t+='<div class="row"><div class="col-sm-12"><div id="FormValidator"  class="form-horizontal">',t+='<br><div class="form-group"><div class="col-sm-12"><textarea id="content" name="content" class="form-control" rows="5"></textarea></div></div>',t+="</div></div></div>",BootstrapDialog.show({title:"\u95ee\u9898\u53cd\u9988",message:t,onshown:function(e){$("#FormValidator").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{content:{message:"\u53cd\u9988\u5185\u5bb9\u65e0\u6548",validators:{notEmpty:{message:"\u53cd\u9988\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"}}}}})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(t){if($("#FormValidator").bootstrapValidator("validate"),$("#FormValidator").data("bootstrapValidator").isValid()){var a="";a="devMac="+e+"&content="+$("#content").val(),$.ajax({type:"POST",url:"customer/sendRepairMail.action",data:a,dataType:"json",success:function(e){var a="";return a=e.message,t.close(),errorNotify("",a,"info"),!1}})}else BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"})}},{label:"\u91cd\u7f6e",action:function(e){$("#FormValidator").data("bootstrapValidator").resetForm(!0),$(".selectpicker").selectpicker("refresh")}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})}function queryParams_ccdwcx(e){var t=$("#RailwayLine").val(),a=$("#plateNumber").val(),i={limit:e.limit,offset:e.offset,car_type:car_type,trainLine:t,plateNumber:a};return i}$("#table-sjhcx").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]}),$("#serach_button").click(function(){$(".loading").show(),$("#getDeviceByPhonenumber").html("");var e="";e="phoneNumber="+$("#phoneNumber").val()+"&phonenMac="+$("#phonenMac").val(),$.ajax({type:"post",url:"customer/getDeviceByPhonenumber.action",timeout:6e4,dataType:"json",data:e,success:function(e){$(".loading").hide();var t="";t+='<table id="table-sjhcx">',t+="<thead><tr><th>\u5e8f\u53f7</th><th>\u8fde\u63a5\u65f6\u95f4</th><th>\u8bbe\u5907SN</th><th>\u8bbe\u5907\u72b6\u6001</th><th>\u53611\u4fe1\u53f7</th><th>\u53611\u8054\u7f51\u72b6\u6001</th><th>\u53612\u4fe1\u53f7</th><th>\u53612\u8054\u7f51\u72b6\u6001</th><th>\u6280\u672f\u652f\u6301</th></thead>",t+="<tbody>",$.each(e,function(e,a){var i="";i=1==a.realStatus?'\u5728\u7ebf <i class="fa fa-circle realStatus-on"></i>':'\u79bb\u7ebf <i class="fa fa-circle realStatus-off"></i>',e=++e,t+="<tr><td>"+e+"</td><td>"+a.connectionTime+"</td><td>"+a.devMac+"</td><td>"+i+"</td><td>"+signalStrengthCN(a.sim1Signal)+"</td><td>"+simStatusCN(a.sim1Status)+"</td><td>"+signalStrengthCN(a.sim2Signal)+"</td><td>"+simStatusCN(a.sim2Status)+'</td><td><button class="btn btn-primary" type="submit" onclick="sendRepairMail(\''+a.devMac+"');\">send</button></td>"}),t+="</tbody>",t+="</table>",$("#getDeviceByPhonenumber").html(t),$("#table-sjhcx").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(e.target).text();$(e.relatedTarget).text();"\u8f66\u6b21\u5b9a\u4f4d\u67e5\u8be2"==t&&(getRailwayLine("","",""),getDeviceByTrainLineByPage())}),$("#serach_button2").click(function(){var e=$("#RailwayLine").val();$("#plateNumber").val();if(""==e)$("#TrainLineByLineNameDiv").hide(),errorNotify(null,"\u8bf7\u9009\u62e9\u8f66\u6b21\uff01");else{$("#table-ccdwcx").bootstrapTable("refresh",{url:"customer/getDeviceByTrainLineByPage.action",queryParams:queryParams_ccdwcx}),$("#TrainLineByLineNameDiv").show(),$("#TrainLineByLineName").html("");var t="";t="trainLineId="+$("#RailwayLine").val(),$.ajax({type:"POST",url:"trainLine/getTrainLineByLineName.action",data:t,dataType:"json",success:function(e){var t="";t="",$("#TrainLineByLineName").html(e.startStation+" -> "+e.endStation)}})}});