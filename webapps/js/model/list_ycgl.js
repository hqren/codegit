function ycgl_read(e,t){ExecJobId=e;var l="",a="";a="execJobId="+e,l+='<div class="table row"><form class="form-horizontal">',l+='<div class="form-group"><label class="col-sm-2 control-label">\u547d\u4ee4\u7f16\u53f7</label><div class="col-sm-10"><p class="form-control-static" id="execJobId">'+t+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u547d\u4ee4\u63cf\u8ff0\u5185\u5bb9</label><div class="col-sm-10"><p class="form-control-static" id="jobDesc"></p></div></div>',l+='<div class="form-group"><label class="col-sm-2 control-label">\u547d\u4ee4\u5185\u5bb9</label><div class="col-sm-10"><p class="form-control-static" id="data"></p></div></div>',l+='<div class="col-sm-12"><div class="input-group"><input type="text" id="mac" class="form-control" placeholder="\u8bf7\u8f93\u5165MAC\u5730\u5740"><div class="input-group-btn"><button id="serach_button2" class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-search"></i></button></div></div></div>',l+="</form></div>",l+='<table id="table-ycgl_read"></table>',BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u8fdc\u7a0b\u7ba1\u7406\u67e5\u770b",message:l,onshown:function(e){$.ajax({type:"POST",url:"execJob/getExecJobDetailById.action",timeout:6e4,dataType:"json",data:a,success:function(e){$("#jobDesc").html(e.jobDesc),$("#data").html(HTMLEncode(e.data))},error:function(e,t,l){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}}),$(".selectpicker").selectpicker("refresh");var t=$("#table-ycgl_read");t.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"execJob/getExecDevJobDetailByPage.action",dataType:"json",striped:!0,uniqueId:"devClientVersionId",pagination:!0,sortable:!1,sidePagination:"server",queryParams:queryParams_ycgl,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,l){return l+1}},{title:"\u8bbe\u5907Mac",field:"mac",align:"center",valign:"middle"},{title:"\u4e0b\u53d1\u72b6\u6001",field:"needSetConfig",align:"center",valign:"middle"},{title:"\u4e0b\u53d1\u7ed3\u679c",field:"result",align:"center",valign:"middle",formatter:function(e,t,l){if(null!=e){if("0"==e)return"\u5931\u8d25";if("1"==e)return"\u6210\u529f"}return"-"}},{title:"\u6267\u884c\u8be6\u60c5",field:"remarks",align:"center",valign:"middle",width:200},{title:"\u5b8c\u6210\u65f6\u95f4",field:"finishTime",align:"center",valign:"middle",formatter:function(e,t,l){return e}},{title:"\u8017\u65f6 (\u6beb\u79d2)",field:"timeUsed",align:"center",valign:"middle"},{title:"\u6267\u884c\u65f6\u95f4",field:"timeStamp",align:"center",valign:"middle"}]}),$("#serach_button2").click(function(){$(".bootstrap-dialog-message .bootstrap-table").remove(),$(".bootstrap-dialog-message .clearfix").remove(),$(".bootstrap-dialog-message").append('<table id="table-wjxf_read"></table>');var e=$("#table-wjxf_read");return e.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"execJob/getExecDevJobDetailByPage.action",dataType:"json",striped:!0,uniqueId:"devClientVersionId",pagination:!0,sortable:!1,sidePagination:"server",queryParams:queryParams_ycgl,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,l){return l+1}},{title:"\u6309\u65e5\u671f\u5206\u533a",field:"jobStartDate",align:"center",valign:"middle"},{title:"\u8bbe\u5907mac",field:"mac",align:"center",valign:"middle"},{title:"needSetConfig",field:"needSetConfig",align:"center",valign:"middle"},{title:"\u662f\u5426\u6210\u529f\u5b8c\u6210\u66f4\u65b0",field:"result",align:"center",valign:"middle",formatter:function(e,t,l){if(null!=e){if("0"==e)return"\u5426";if("1"==e)return"\u662f"}return"-"}},{title:"\u8bbe\u5907\u7ec8\u7aef\u5b8c\u6210\u66f4\u65b0\u65f6\u95f4",field:"finishTime",align:"center",valign:"middle",formatter:function(e,t,l){return new Date(e.replace(/-/g,"/")).format("yyyy-MM-dd HH:mm:ss")}},{title:"\u66f4\u65b0\u65f6\u95f4",field:"updateTime",align:"center",valign:"middle",formatter:function(e,t,l){return new Date(e.replace(/-/g,"/")).format("yyyy-MM-dd HH:mm:ss")}},{title:"\u8017\u65f6 (\u6beb\u79d2)",field:"timeUsed",align:"center",valign:"middle"},{title:"\u6267\u884c\u65f6\u95f4",field:"timeStamp",align:"center",valign:"middle"}]}),!1})},buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}function queryParams_ycgl(e){var t={limit:e.limit,offset:e.offset,execJobId:ExecJobId,mac:$("#mac").val()};return t}var $table=$("#table-ycgl");$table.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"execJob/getExecJobByPage.action",dataType:"json",striped:!0,toolbar:"#toolbar",uniqueId:"devClientVersionId",pagination:!0,singleSelect:!1,sortable:!1,sidePagination:"server",columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,l){return l+1}},{title:"\u547d\u4ee4\u7f16\u53f7",field:"jobId",align:"center",valign:"middle",width:160},{title:"\u547d\u4ee4\u5185\u5bb9",field:"data",align:"center",valign:"middle",width:200,formatter:function(e,t,l){return HTMLEncode(e)}},{title:"\u547d\u4ee4\u63cf\u8ff0\u5185\u5bb9",field:"jobDesc",align:"center",valign:"middle",width:200},{title:"\u4efb\u52a1\u72b6\u6001",field:"jobStatus",align:"center",valign:"middle",formatter:function(e,t,l){if(null!=e){if("0"==e)return"\u51c6\u5907\u4e2d";if("1"==e)return"\u51c6\u5907\u5c31\u7eea";if("2"==e)return"\u4e0b\u53d1\u4e2d";if("3"==e)return"\u51c6\u5907\u5c31\u7eea"}return"-"}},{title:"\u7edf\u8ba1\u7ed3\u679c",field:"countResult",align:"center",valign:"middle"},{title:"\u6dfb\u52a0\u65f6\u95f4",field:"updateTime",align:"center",valign:"middle",formatter:function(e,t,l){return new Date(e.replace(/-/g,"/")).format("yyyy-MM-dd HH:mm:ss")}},{title:"\u64cd\u4f5c",field:"cz",align:"center",valign:"middle",formatter:function(e,t,l){var a='<button class="btn btn-primary" type="submit" onclick="ycgl_read('+t.execJobId+","+t.jobId+');">\u67e5\u770b</button>';return a}}]}),$("#ycgl_add").click(function(){var e="";e+='<div class="row"><div class="col-sm-12"><div class="form-horizontal" id="FormValidator">',e+='<br><div class="form-group" id="options_zxfs"><label class="col-sm-3 control-label">\u6267\u884c\u65b9\u5f0f</label><div class="col-sm-8"><div class="btn-group" data-toggle="buttons"><label class="btn btn-primary active"><input type="radio" name="options" id="ClickAll" value="1" checked>\u6279\u91cf</label><label class="btn btn-primary"><input type="radio" name="options" id="ClickOne" value="2">\u5206\u7ec4</label></div></div></div>',e+='<div class="form-group"><label class="col-sm-3 control-label">\u547d\u4ee4\u5185\u5bb9</label><div class="col-sm-8"><textarea id="data" name="data" class="form-control" rows="2"></textarea></div></div>',e+='<div class="form-group"><label class="col-sm-3 control-label">\u547d\u4ee4\u63cf\u8ff0</label><div class="col-sm-8"><textarea id="jobDesc" name="jobDesc" class="form-control" rows="2"></textarea></div></div>',e+='<div class="form-group" id="SB_All"><label class="col-sm-3 control-label">\u6267\u884c\u8bbe\u5907</label><div class="col-sm-8"><textarea id="macs" name="macs" class="form-control" rows="2"></textarea></div></div>',e+='<div class="form-group" id="SB_One" style="display:none"><label class="col-sm-3 control-label">\u6267\u884c\u8bbe\u5907</label><div class="col-sm-3"><select id="groupId" class="selectpicker form-control"><option value="1">\u5168\u90e8</option><option value="2">\u94c1\u8def</option><option value="3">\u5927\u5df4</option></select></div><div class="col-sm-4" id="select_2" style="display:none;"><select id="groupId2" class="selectpicker form-control" title="\u9009\u62e9\u5382\u5546" multiple></select></div></div>',e+="</div></div></div>",BootstrapDialog.show({title:"\u6dfb\u52a0\u8fdc\u7a0b\u547d\u4ee4",message:e,onshown:function(e){$("#FormValidator").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{data:{message:"\u547d\u4ee4\u5185\u5bb9\u65e0\u6548",validators:{notEmpty:{message:"\u547d\u4ee4\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"}}},macs:{message:"\u8bbe\u5907\u65e0\u6548",validators:{notEmpty:{message:"\u8bbe\u5907\u4e0d\u80fd\u4e3a\u7a7a"}}}}}),$(".selectpicker").selectpicker("refresh"),$("#ClickAll").parent().click(function(){$("#SB_All").show(),$("#SB_One").hide()}),$("#ClickOne").parent().click(function(){$("#SB_All").hide(),$("#SB_One").show()}),$("#groupId").change(function(){$("#groupId2").html(""),1!=$(this).val()?($("#select_2").show(),2==$(this).val()&&$("#groupId2").append('<option value="4">\u4e2d\u5174\u9ad8\u8fbe</option>'),3==$(this).val()&&($("#groupId2").append('<option value="5">\u9510\u6377</option>'),$("#groupId2").append('<option value="6">\u50b2\u5929</option>')),$("#groupId2").selectpicker("refresh")):$("#select_2").hide()})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(e){if($("#FormValidator").bootstrapValidator("validate"),$("#FormValidator").data("bootstrapValidator").isValid()){var t="data="+encodeURIComponent($("#data").val())+"&jobDesc="+encodeURIComponent($("#jobDesc").val()),l=$("#options_zxfs input:radio:checked").val();groupIds=$("#groupId2").val(),null==groupIds&&(groupIds=$("#groupId").val()),2==l&&(t+="&groupIds="+groupIds),1==l&&(t+="&macs="+$("#macs").val()),$.ajax({type:"post",url:"execJob/addDevJob.action",timeout:6e4,dataType:"json",data:t,success:function(t){return $("#table-ycgl").bootstrapTable("refresh",{url:"execJob/getExecJobByPage.action"}),0!=t.code?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t.message,buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}),!1):(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t.message,buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}),void e.close())},error:function(e,t,l){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}else BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"})}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})}),$("#ycgl_dr").click(function(){var e="";e+='<input id="file_excel" name="file_excel" class="file" type="file">',BootstrapDialog.show({title:"\u5bfc\u5165\u8fdc\u7a0b\u547d\u4ee4",message:e,onshown:function(e){$("#file_excel").fileinput({language:"zh",uploadUrl:"execJob/importDevJob.action",allowedFileExtensions:["xls","xlsx"],showPreview:!1,browseClass:"btn btn-primary",dropZoneEnabled:!1,maxFileCount:1,enctype:"multipart/form-data",validateInitialCount:!1}),$("#file_excel").on("fileuploaded",function(t,l,a,i){$("#table-ycgl").bootstrapTable("refresh",{url:"execJob/getExecJobByPage.action"});var o=(l.response.code,l.response.message);BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:o,buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}),e.close()})}})}),$("#ycgl_Template").click(function(e){window.open("excelTemplate/importCmd.xls")});