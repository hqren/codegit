function kqgl_read(e){TempAuthUserId=e;var t="";t="authUserId="+e+"&range=90",$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"userAttendance/queryUserInfo.action",dataType:"json",data:t,success:function(e){var t="";t+='<div class="table row"><div class="form-horizontal">',t+='<div class="form-group col-sm-12"><div class="col-sm-3"><p class="form-control-static">\u59d3\u540d\uff1a'+e.authUserName+'</p></div><div class="col-sm-3"><p class="form-control-static">\u914d\u5c5e\u5c40\uff1a'+e.bureauName+'</p></div><div class="col-sm-3"><p class="form-control-static">\u914d\u5c5e\u6bb5\uff1a'+e.stationName+'</p></div><div class="col-sm-3"><p class="form-control-static">\u914d\u5c5e\u8f66\u95f4\uff1a'+e.shopName+"</p></div></div>",t+="</div></div>",t+='<table id="table-kqgl_read"></table>',BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u8be6\u60c5",message:t,onshown:function(e){var t=$("#table-kqgl_read");t.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"userAttendance/queryUserDetailAttendanceByPage.action",dataType:"json",striped:!0,uniqueId:"devClientVersionId",pagination:!0,sortable:!1,sidePagination:"server",queryParams:queryParams_kqgl_read,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,a){return a+1}},{title:"\u59d3\u540d",field:"authUserName",align:"center",valign:"middle"},{title:"\u5e10\u53f7",field:"authloginName",align:"center",valign:"middle"},{title:"\u65e5\u671f",field:"attendanceDate",align:"center",valign:"middle"},{title:"\u7b7e\u5230SN",field:"signMac",align:"center",valign:"middle"},{title:"\u7b7e\u5230\u65f6\u95f4",field:"signTime",align:"center",valign:"middle"},{title:"\u7b7e\u9000\u65f6\u95f4",field:"signOutTime",align:"center",valign:"middle"},{title:"\u7b7e\u9000\u4f4d\u7f6e",field:"signOutAddress",align:"center",valign:"middle",width:200}]})},buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff01")}})}function queryParams_kqgl_read(e){var t={limit:e.limit,offset:e.offset,authUserId:TempAuthUserId,range:90};return t}function queryParams_kqgl(e){var t,a,i=new Date;t=""==$("#datetimeStart").val()?new Date(i).format("yyyy-MM-01"):$("#datetimeStart").val(),a=""==$("#datetimeEnd").val()?new Date(i).format("yyyy-MM-dd"):$("#datetimeEnd").val();var n={limit:e.limit,offset:e.offset,authUserName:$("#AuthUserName").val(),authloginName:$("#AuthloginName").val(),startDate:t,endDate:a,trainBureauId:$("#RailwayBureau").val(),trainStationId:$("#RailwayStation").val(),trainShopId:$("#TrainShop").val()};return n}var TempAuthUserId="",$table=$("#table-kqgl");$table.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"userAttendance/queryUserAttendanceByPage.action",dataType:"json",striped:!0,toolbar:"#toolbar",uniqueId:"id",pagination:!0,singleSelect:!1,idField:"id",sortable:!1,sidePagination:"server",queryParams:queryParams_kqgl,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,a){return a+1}},{title:"\u59d3\u540d",field:"authUserName",align:"center",valign:"middle"},{title:"\u5e10\u53f7",field:"authloginName",align:"center",valign:"middle"},{title:"\u914d\u5c5e\u5c40",field:"bureauName",align:"center",valign:"middle"},{title:"\u914d\u5c5e\u6bb5",field:"stationName",align:"center",valign:"middle"},{title:"\u914d\u5c5e\u8f66\u95f4",field:"shopName",align:"center",valign:"middle"},{title:"\u64cd\u4f5c",field:"cz",align:"center",valign:"middle",formatter:function(e,t,a){var i="";return i='<button class="btn btn-primary" type="submit" onclick="kqgl_read('+t.authUserId+');">\u8be6\u60c5</button>'}}]}),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayBureau.action",dataType:"json",success:function(e){$.each(e,function(e,t){$("#RailwayBureau").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u5c40\u4fe1\u606f\uff01")}}),$("#RailwayBureau").change(function(){if(""!=$(this).val()){var e="";e="trainBureauId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayStation.action",dataType:"json",data:e,success:function(e){$("#RailwayStation").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(e,function(e,t){$("#RailwayStation").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u6bb5\u4fe1\u606f\uff01")}})}else $("#RailwayStation").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#RailwayStation").change(function(){if(""!=$(this).val()){var e="";e="trainBureauId="+$("#RailwayBureau").val()+"&trainStationId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayShop.action",dataType:"json",data:e,success:function(e){$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(e,function(e,t){$("#TrainShop").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u8f66\u95f4\u4fe1\u606f\uff01")}})}else $("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")});var date=new Date;$("#datetimeStart").val(new Date(date).format("yyyy-MM-01")),$("#datetimeEnd").val(new Date(date).format("yyyy-MM-dd")),$(".datetimeStart").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,minView:"month",maxView:"decade",language:"zh-CN"}).on("click",function(e){$(".datetimeStart").datetimepicker("setEndDate",$("#datetimeEnd").val())}),$(".datetimeEnd").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,minView:"month",maxView:"decade",language:"zh-CN"}).on("click",function(e){$(".datetimeEnd").datetimepicker("setStartDate",$("#datetimeStart").val()).datetimepicker("setEndDate",new Date(date).format("yyyy-MM-dd"))}),$("#serach_button").click(function(){$("#table-kqgl").bootstrapTable("refresh")}),$("#kqgl_download").click(function(){var e=$("#AuthUserName").val(),t=$("#AuthloginName").val(),a=$("#datetimeStart").val(),i=$("#datetimeEnd").val(),n=($("#RailwayBureau").val(),$("#RailwayStation").val()),l=$("#TrainShop").val();$("#datetimeStart").val()==$("#datetimeEnd").val()&&$("#datetimeEnd").val()==new Date(date).format("yyyy-MM-dd")?BootstrapDialog.alert({title:"\u5bfc\u51fa\u5931\u8d25",message:"\u65e0\u6cd5\u5bfc\u51fa\u5f53\u5929\u8003\u52e4\u6570\u636eã€‚",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"}):window.open("userAttendance/exportAttendanceInfo.action?authUserName="+e+"&authloginName="+t+"&trainStationId="+n+"&trainShopId="+l+"&startDate="+a+"&endDate="+i+"&car_type="+car_type)});