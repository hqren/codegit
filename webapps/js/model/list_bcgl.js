function bcgl_edit(e){bcglReadId=e;var t="";t="id="+e,$.ajax({type:"get",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/queryUserScheduleShiftByPage.action",dataType:"json",data:t,success:function(t){morningUsersIdArray=new Array,noonUsersIdArray=new Array,nightUsersIdArray=new Array;var a="";t=t.rows[0];var i=t.trainBureauId,o=t.trainStationId,n=t.trainShopId,r=t.startDate,s=t.endDate,l=t.morningStartTime,c=t.morningEndTime,d=t.noonStartTime,p=t.noonEndTime,u=t.nightStartTime,m=t.nightEndTime,h=t.morningStatus,f=t.noonStatus,y=t.nightStatus,v=t.morningUsersId,g=t.noonUsersId,b=t.nightUsersId,S=t.morningId,T=t.noonId,w=t.nightId,I=t.morningUserIds,N=t.noonUserIds,j=t.nightUserIds;I.length>0&&(v=String(I)),N.length>0&&(g=String(N)),j.length>0&&(b=String(j));var D="",x="",k="";"1"==h&&(D=" checked"),"1"==f&&(x=" checked"),"1"==y&&(k=" checked"),""!=v&&(morningUsersIdArray=v.split(",")),""!=g&&(noonUsersIdArray=g.split(",")),""!=b&&(nightUsersIdArray=b.split(",")),$.ajax({type:"post",url:"selectObject/getRailwayBureau.action",contentType:"application/json",dataType:"json",success:function(t){$.each(t,function(e,t){a+='<option value="'+t.value+'">'+t.text+"</option>"});var h="";h+='<div class="row"><div class="col-sm-12"><div class="form-horizontal" id="FormValidator">',h+='<br><div class="form-group"><div class="col-sm-4"><select id="RailwayBureau2" name="RailwayBureau2" class="selectpicker form-control" data-live-search="true"><option value="">\u9009\u62e9\u914d\u5c5e\u5c40</option>'+a+'</select></div><div class="col-sm-4"><select id="RailwayStation2" name="RailwayStation2" class="selectpicker form-control" data-live-search="true"><option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option></select></div><div class="col-sm-4"><select id="TrainShop2" name="TrainShop2" class="selectpicker form-control" data-live-search="true"><option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option></select></div></div>',h+='<div class="form-group"><label class="col-sm-2 control-label">\u65e5\u671f</label><div class="col-sm-4"><div class="input-group date startDate2"><input type="text" class="form-control" id="startDate2" name="startDate2" value="'+r+'" placeholder="\u5f00\u59cb\u65e5\u671f" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-calendar"></span></span></div></div><div class="col-sm-4"><div class="input-group date endDate2"><input type="text" class="form-control" id="endDate2" name="endDate2" value="'+s+'" placeholder="\u7ed3\u675f\u65e5\u671f" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-calendar"></span></span></div></div></div>',h+='<div class="form-group"><label class="col-sm-2 control-label checkbox"><label><input id="morning" type="checkbox"'+D+'> \u65e9\u73ed</label></label><div class="col-sm-4"><div class="input-group date morningStartTime2"><input type="text" class="form-control" id="morningStartTime2" name="morningStartTime2" value="'+l+'" placeholder="\u5f00\u59cb\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div><div class="col-sm-4"><div class="input-group date morningEndTime2"><input type="text" class="form-control" id="morningEndTime2" name="morningEndTime2" value="'+c+'" placeholder="\u7ed3\u675f\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div><p class="col-sm-2 form-control-static"><a href="javascript:void(0);" onclick="bcgl_add_user(\'morning\',\'edit\','+S+');">\u7f16\u8f91\u6210\u5458</a></p></div>',h+='<div class="form-group"><label class="col-sm-2 control-label checkbox"><label><input id="noon" type="checkbox"'+x+'> \u4e2d\u73ed</label></label><div class="col-sm-4"><div class="input-group date noonStartTime2"><input type="text" class="form-control" id="noonStartTime2" name="noonStartTime2" value="'+d+'" placeholder="\u5f00\u59cb\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div><div class="col-sm-4"><div class="input-group date noonEndTime2"><input type="text" class="form-control" id="noonEndTime2" name="noonEndTime2" value="'+p+'" placeholder="\u7ed3\u675f\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div><p class="col-sm-2 form-control-static"><a href="javascript:void(0);" onclick="bcgl_add_user(\'noon\',\'edit\','+T+');">\u7f16\u8f91\u6210\u5458</a></p></div>',h+='<div class="form-group"><label class="col-sm-2 control-label checkbox"><label><input id="night" type="checkbox"'+k+'> \u665a\u73ed</label></label><div class="col-sm-4"><div class="input-group date nightStartTime2"><input type="text" class="form-control" id="nightStartTime2" name="nightStartTime2" value="'+u+'" placeholder="\u5f00\u59cb\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div><div class="col-sm-4"><div class="input-group date nightEndTime2"><input type="text" class="form-control" id="nightEndTime2" name="nightEndTime2" value="'+m+'" placeholder="\u7ed3\u675f\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div><p class="col-sm-2 form-control-static"><a href="javascript:void(0);" onclick="bcgl_add_user(\'night\',\'edit\','+w+');">\u7f16\u8f91\u6210\u5458</a></p></div>',h+="</div></div></div>",BootstrapDialog.show({title:"\u7f16\u8f91\u73ed\u6b21\u4fe1\u606f",message:h,onshown:function(e){$(".selectpicker").selectpicker("refresh");new Date;$("#RailwayBureau2").selectpicker("val",i),$(".selectpicker").selectpicker("refresh");var t="";t="trainBureauId="+i,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayStation.action",dataType:"json",data:t,success:function(e){$("#RailwayStation2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$.each(e,function(e,t){$("#RailwayStation2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh"),$("#RailwayStation2").selectpicker("val",o),$("#RailwayStation2").selectpicker("refresh");var t="";t="trainBureauId="+i+"&trainStationId="+o,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayShop.action",dataType:"json",data:t,success:function(e){$("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(e,function(e,t){$("#TrainShop2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh"),$("#TrainShop2").selectpicker("val",n),$("#TrainShop2").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u8f66\u95f4\u4fe1\u606f\uff01")}})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u6bb5\u4fe1\u606f\uff01")}}),$("#RailwayBureau2").change(function(){if(""!=$(this).val()){var e="";e="trainBureauId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayStation.action",dataType:"json",data:e,success:function(e){$("#RailwayStation2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(e,function(e,t){$("#RailwayStation2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u6bb5\u4fe1\u606f\uff01")}})}else $("#RailwayStation2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#RailwayStation2").change(function(){if(""!=$(this).val()){var e="";e="trainBureauId="+$("#RailwayBureau2").val()+"&trainStationId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayShop.action",dataType:"json",data:e,success:function(e){$("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(e,function(e,t){$("#TrainShop2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u8f66\u95f4\u4fe1\u606f\uff01")}})}else $("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$(".startDate2").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,minView:"month",maxView:"decade",language:"zh-CN"}).on("click",function(e){$(".startDate2").datetimepicker("setEndDate",$("#endDate2").val())}),$(".endDate2").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,minView:"month",maxView:"decade",language:"zh-CN"}).on("click",function(e){$(".endDate2").datetimepicker("setStartDate",$("#startDate2").val())}),$(".morningStartTime2").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5}),$(".morningEndTime2").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5}),$(".noonStartTime2").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5}),$(".noonEndTime2").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5}),$(".nightStartTime2").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5}),$(".nightEndTime2").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(t){if(ValidatorCheckedSelect(),""==$("#RailwayBureau2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u5c40",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#RailwayStation2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u6bb5",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#TrainShop2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u8f66\u95f4",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(ValidatorMorning&&ValidatorNoon&&ValidatorNight){var a=0,i=0,o=0;$("#morning").is(":checked")&&(a=1),$("#noon").is(":checked")&&(i=1),$("#night").is(":checked")&&(o=1);var n="";n="id="+e+"&trainBureauId="+$("#RailwayBureau2").val()+"&trainStationId="+$("#RailwayStation2").val()+"&trainShopId="+$("#TrainShop2").val()+"&startDate="+$("#startDate2").val()+"&endDate="+$("#endDate2").val(),n+="&morningStartTime="+$("#morningStartTime2").val()+"&morningEndTime="+$("#morningEndTime2").val()+"&morningStatus="+a,n+="&noonStartTime="+$("#noonStartTime2").val()+"&noonEndTime="+$("#noonEndTime2").val()+"&noonStatus="+i,n+="&nightStartTime="+$("#nightStartTime2").val()+"&nightEndTime="+$("#nightEndTime2").val()+"&nightStatus="+o,n+="&morningUsersId="+morningUsersIdArray+"&noonUsersId="+noonUsersIdArray+"&nightUsersId="+nightUsersIdArray,n+="&morningId="+S+"&noonId="+T+"&nightId="+w,$.ajax({type:"post",url:"userScheduleShift/updateScheduleShiftUserInfo.action",timeout:6e4,dataType:"json",data:n,success:function(e){var a="";a=600009==e.result?e.message:ConfigCN[e.result],600005==e.result&&($("#table-bcgl").bootstrapTable("refresh"),t.close()),BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:a,buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}else ValidatorMorning?ValidatorNoon?ValidatorNight?BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"}):BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u665a\u73ed\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}):BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u4e2d\u73ed\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}):BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u65e9\u73ed\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u5c40\u4fe1\u606f\uff01")}})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u73ed\u6b21\u4fe1\u606f\uff01")}})}function bcgl_add_UsersIdArray(index){if(""==$("#RailwayBureau2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u5c40",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#RailwayStation2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u6bb5",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#TrainShop2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u8f66\u95f4",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else{var data="";data="trainShopId="+$("#TrainShop2").val();var strHtml="";strHtml+='<div class="row"><div class="col-sm-12"><form id="FormValidator"  class="form-horizontal">',strHtml+='<div class="form-group"><div class="col-sm-6"><ul id="treeDemo" class="ztree"></ul></div></div>',strHtml+="</form></div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_SMALL,title:"\u6dfb\u52a0\u6210\u5458",message:strHtml,onshown:function(dialogRef){$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/queryUserInfoByShopId.action",dataType:"json",data:data,success:function(jsonResult){var RailwayBureau2=$("#RailwayBureau2").find("option:selected").text(),RailwayStation2=$("#RailwayStation2").find("option:selected").text(),TrainShop2=$("#TrainShop2").find("option:selected").text(),setting={check:{enable:!0},data:{simpleData:{enable:!0}}},treeNodeArray=new Array,treeNodeObject=new Object;treeNodeObject.id=0,treeNodeObject.name=RailwayBureau2,treeNodeObject.open=!0,treeNodeArray.push(treeNodeObject);var treeNodeObject=new Object;treeNodeObject.id=9999,treeNodeObject.pId=0,treeNodeObject.name=RailwayStation2,treeNodeObject.open=!0,treeNodeArray.push(treeNodeObject);var treeNodeObject=new Object;treeNodeObject.id=99999,treeNodeObject.pId=9999,treeNodeObject.name=TrainShop2,treeNodeObject.open=!0,treeNodeArray.push(treeNodeObject),$.each(jsonResult,function(e,t){if(null!=t){var a=new Object;a.id=t.id,a.pId=99999,a.name=t.username,a.open=!0,treeNodeArray.push(a)}});var zNodes=eval(treeNodeArray);$.fn.zTree.init($("#treeDemo"),setting,zNodes);var zTree=$.fn.zTree.getZTreeObj("treeDemo");$.each(UsersIdArray[index],function(e,t){zTree.checkNode(zTree.getNodeByParam("id",t),!0)})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff01")}})},buttons:[{label:"\u786e\u8ba4",cssClass:"btn-primary",action:function(e){var t=$.fn.zTree.getZTreeObj("treeDemo"),a=t.getCheckedNodes(),i=new Array;$.each(a,function(e,t){void 0==t.children&&i.push(t.id)}),UsersIdArray[index]=i,e.close()}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})}}function bcgl_add_user(UserType,operation,scheduleShiftId){if(""==$("#RailwayBureau2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u5c40",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#RailwayStation2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u6bb5",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#TrainShop2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u8f66\u95f4",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else{var data="";data="trainShopId="+$("#TrainShop2").val();var strHtml="";strHtml+='<div class="row"><div class="col-sm-12"><form id="FormValidator"  class="form-horizontal">',strHtml+='<div class="form-group"><div class="col-sm-6"><ul id="treeDemo" class="ztree"></ul></div></div>',strHtml+="</form></div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_SMALL,title:"\u6dfb\u52a0\u6210\u5458",message:strHtml,onshown:function(dialogRef){$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/queryUserInfoByShopId.action",dataType:"json",data:data,success:function(jsonResult){var RailwayBureau2=$("#RailwayBureau2").find("option:selected").text(),RailwayStation2=$("#RailwayStation2").find("option:selected").text(),TrainShop2=$("#TrainShop2").find("option:selected").text(),setting={check:{enable:!0},data:{simpleData:{enable:!0}}},treeNodeArray=new Array,treeNodeObject=new Object;treeNodeObject.id=0,treeNodeObject.name=RailwayBureau2,treeNodeObject.open=!0,treeNodeArray.push(treeNodeObject);var treeNodeObject=new Object;treeNodeObject.id=9999,treeNodeObject.pId=0,treeNodeObject.name=RailwayStation2,treeNodeObject.open=!0,treeNodeArray.push(treeNodeObject);var treeNodeObject=new Object;treeNodeObject.id=99999,treeNodeObject.pId=9999,treeNodeObject.name=TrainShop2,treeNodeObject.open=!0,treeNodeArray.push(treeNodeObject),$.each(jsonResult,function(e,t){if(null!=t){var a=new Object;a.id=t.id,a.pId=99999,a.name=t.username,a.open=!0,treeNodeArray.push(a)}});var zNodes=eval(treeNodeArray);if($.fn.zTree.init($("#treeDemo"),setting,zNodes),"edit"!=operation){var TempArray=new Array;"morning"==UserType?morningUsersIdArray.length>0&&(TempArray=morningUsersIdArray):"noon"==UserType?noonUsersIdArray.length>0&&(TempArray=noonUsersIdArray):"night"==UserType&&nightUsersIdArray.length>0&&(TempArray=nightUsersIdArray);var zTree=$.fn.zTree.getZTreeObj("treeDemo");$.each(TempArray,function(e,t){zTree.checkNode(zTree.getNodeByParam("id",t),!0)})}else{var data="";data="userScheduleId="+bcglReadId+"&scheduleShiftId="+scheduleShiftId,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/queryUserInfoByScheduleShiftId.action",dataType:"json",data:data,success:function(e){TempArray=e,"morning"==UserType?morningUsersIdArray.length>0&&(TempArray=TempArray.concat(morningUsersIdArray)):"noon"==UserType?noonUsersIdArray.length>0&&(TempArray=TempArray.concat(noonUsersIdArray)):"night"==UserType&&nightUsersIdArray.length>0&&(TempArray=TempArray.concat(nightUsersIdArray)),TempArray=unique(TempArray);var t=$.fn.zTree.getZTreeObj("treeDemo");$.each(TempArray,function(e,a){t.checkNode(t.getNodeByParam("id",a),!0)})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff01")}})}},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff01")}})},buttons:[{label:"\u786e\u8ba4",cssClass:"btn-primary",action:function(e){var t=$.fn.zTree.getZTreeObj("treeDemo"),a=t.getCheckedNodes(),i=new Array;$.each(a,function(e,t){void 0==t.children&&i.push(t.id)}),"morning"==UserType?morningUsersIdArray=i:"noon"==UserType?noonUsersIdArray=i:"night"==UserType&&(nightUsersIdArray=i),e.close()}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})}}function bcgl_delOne(e){BootstrapDialog.confirm({title:"\u5220\u9664\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u6240\u9009\u62e9\u73ed\u6b21\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(t){if(t){var a="";a="id="+e,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/deleteScheduleShiftUserInfo.action",timeout:6e4,dataType:"json",data:a,success:function(e){var t="";return t=600009==e.result?e.message:ConfigCN[e.result],600002!=e.result?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t,buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}),!1):($("#table-bcgl").bootstrapTable("refresh"),void BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t,buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}}})}function bcgl_read(e,t,a){var i="\u67e5\u770b\u8be6\u60c5";"edit"==a&&(i="\u7f16\u8f91\u8be6\u60c5"),bcglReadId=e;var o="";o="id="+e,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/queryShiftUserInfoByPage.action",timeout:6e4,dataType:"json",data:o,success:function(o){var n="",r="";new Array;$.each(o,function(e,t){n+=1==t.isNextDay?"edit"==a?'<th class="shiftName"><div id="shiftName_'+t.shiftId+"_"+e+'" ><div href="javascript:void(0)" onclick="updateScheduleShiftInfo('+t.shiftId+",'"+t.shiftName+"','"+t.shiftStartTime+"','"+t.shiftEndTime+"',"+t.isNextDay+","+e+');">'+t.shiftName+"<br>"+t.shiftStartTime+"-(\u6b21)"+t.shiftEndTime+"</div></div></th>":'<th class="shiftName"><div id="shiftName_'+t.shiftId+"_"+e+'" ><div>'+t.shiftName+"<br>"+t.shiftStartTime+"-(\u6b21)"+t.shiftEndTime+"</div></div></th>":"edit"==a?'<th class="shiftName"><div id="shiftName_'+t.shiftId+"_"+e+'" ><div href="javascript:void(0)" onclick="updateScheduleShiftInfo('+t.shiftId+",'"+t.shiftName+"','"+t.shiftStartTime+"','"+t.shiftEndTime+"',"+t.isNextDay+","+e+');">'+t.shiftName+"<br>"+t.shiftStartTime+"-"+t.shiftEndTime+"</div></div></th>":'<th class="shiftName"><div id="shiftName_'+t.shiftId+"_"+e+'" ><div>'+t.shiftName+"<br>"+t.shiftStartTime+"-"+t.shiftEndTime+"</div></div></th>"});for(var s=0;31>s;s++){r+="<tr><td>"+(s+1)+"</td>";for(var l=0;l<o.length;l++)r+=null!=o[l].usersName[s]?"edit"==a?'<td class="queryUserInfoByShopId"><div id="shift_'+o[l].shiftId+"_"+s+'" href="javascript:void(0)" onclick="queryUserInfoByShopId('+e+","+o[l].shiftId+","+s+","+t+",'read');\">"+o[l].usersName[s]+"</div></td>":"<td>"+o[l].usersName[s]+"</td>":"edit"==a?'<td title="\u70b9\u51fb\u7f16\u8f91\u4eba\u5458" alt="\u70b9\u51fb\u7f16\u8f91\u4eba\u5458" class="queryUserInfoByShopId"><div id="shift_'+o[l].shiftId+"_"+s+'" href="javascript:void(0)" onclick="queryUserInfoByShopId('+e+","+o[l].shiftId+","+s+","+t+",'read');\">&nbsp;</div></td>":"<td></td>";r+="</tr>"}var c=new Array;c.push({align:"center",valign:"middle"});for(var l=0;l<o.length;l++)c.push({align:"center",valign:"middle"});var d="";d+='<div class="table row"><div class="form-horizontal">',d+="</div></div>",d+='<table id="table-bcgl_read">',d+="<thead><tr><th>\u65e5\u671f</th>"+n+"</tr></thead>",d+="<tbody>",d+=r,d+="</tbody>",d+="</table>",BootstrapDialog.show({title:i,message:d,cssClass:"FullScreen-dialog",onshown:function(e){$("#table-bcgl_read").bootstrapTable({columns:c})},buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}function queryUserInfoByShopId(id,shiftId,day,trainShopId,operation){var TempDay=day+parseInt(1);10>TempDay&&(TempDay="0"+TempDay);var data="";data="trainShopId="+trainShopId;var strHtml="";strHtml+='<div class="row"><div class="col-sm-12"><form id="FormValidator"  class="form-horizontal">',strHtml+='<div class="form-group"><div class="col-sm-6"><ul id="treeDemo" class="ztree"></ul></div></div>',strHtml+="</form></div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_SMALL,title:"\u7f16\u8f91\u6210\u5458",message:strHtml,onshown:function(dialogRef){$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/queryUserInfoByShopId.action",dataType:"json",data:data,success:function(jsonResult){var setting={check:{enable:!0},data:{simpleData:{enable:!0}}},treeNodeArray=new Array,treeNodeObject=new Object;treeNodeObject.id=0,treeNodeObject.name="\u5168\u90e8",treeNodeObject.open=!0,treeNodeArray.push(treeNodeObject),$.each(jsonResult,function(e,t){if(null!=t){var a=new Object;a.id=t.id,a.pId=0,a.name=t.username,a.open=!0,treeNodeArray.push(a)}});var zNodes=eval(treeNodeArray);$.fn.zTree.init($("#treeDemo"),setting,zNodes);var data="";data="userScheduleId="+id+"&scheduleShiftId="+shiftId+"&attendanceDate="+TempDay,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/queryUserInfoByScheduleShiftId.action",dataType:"json",data:data,success:function(e){var t=$.fn.zTree.getZTreeObj("treeDemo");$.each(e,function(e,a){try{t.checkNode(t.getNodeByParam("id",a),!0)}catch(i){}})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff01")}})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff01")}})},buttons:[{label:"\u786e\u8ba4",cssClass:"btn-primary",action:function(e){var t=$.fn.zTree.getZTreeObj("treeDemo"),a=t.getCheckedNodes(),i=new Array,o=new Array;$.each(a,function(e,t){void 0==t.children&&(i.push(t.id),o.push(t.name))});var n=new Object;n.scheduleShiftId=shiftId,n.attendanceDate=TempDay,n.authUsersId=i,n.userScheduleId=id,n.isWork=1;var r="";r=JSON.stringify(n),$.ajax({type:"post",contentType:"application/json",url:"userScheduleShift/updateShiftUserInfo.action",timeout:6e4,dataType:"json",data:r,success:function(t){var a="";600005==t.result&&(a=t.message,$("#shift_"+shiftId+"_"+day).html(String(o).replace(/\,/g,"、"))),600009==t.result?(a=t.message,errorNotify(null,a)):600006==t.result&&(a=ConfigCN[t.result],errorNotify(null,a)),e.close()},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})}function updateScheduleShiftInfo(e,t,a,i,o,n){var r="";r+='<div class="row"><div class="col-sm-12"><div class="form-horizontal" id="FormValidator">',r+='<div class="form-group"><label class="col-sm-3 control-label">'+t+'</label><div class="col-sm-8"><div class="input-group date shiftStartTime"><input type="text" class="form-control" id="shiftStartTime" name="shiftStartTime" value="'+a+'" placeholder="\u5f00\u59cb\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div></div>',r+='<div class="form-group"><label class="col-sm-3 control-label"><input id="isNextDay" type="checkbox"> \u6b21\u65e5</label><div class="col-sm-8"><div class="input-group date shiftEndTime"><input type="text" class="form-control" id="shiftEndTime" name="shiftEndTime" value="'+i+'" placeholder="\u7ed3\u675f\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div></div>',r+="</div></div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u7f16\u8f91\u65f6\u95f4",message:r,onshown:function(e){1==o&&($("#isNextDay").attr("checked",!0),$("#isNextDay").addClass("checked")),$(".shiftStartTime").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5,pickerPosition:"bottom-left"}),$(".shiftEndTime").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5,pickerPosition:"bottom-left"})},buttons:[{label:"\u786e\u8ba4",cssClass:"btn-primary",action:function(a){var i=0;if(i=$("#isNextDay").prop("checked")?1:0,""==$("#shiftStartTime").val())errorNotify(null,"\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a\uff01");else if(""==$("#shiftEndTime").val())errorNotify(null,"\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a\uff01");else if($("#shiftStartTime").val()<$("#shiftEndTime").val()&&1==i)errorNotify(null,"\u5f00\u59cb\u65f6\u95f4\u5c0f\u4e8e\u7ed3\u675f\u65f6\u95f4 \u4e0d\u80fd\u52fe\u9009\u6b21\u65e5\uff01");else if($("#shiftStartTime").val()>$("#shiftEndTime").val()&&0==i)errorNotify(null,"\u5f00\u59cb\u65f6\u95f4\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4 \u5fc5\u987b\u52fe\u9009\u6b21\u65e5\uff01");else if($("#shiftStartTime").val()==$("#shiftEndTime").val())errorNotify(null,"\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u7b49\u4e8e\u7ed3\u675f\u65f6\u95f4\uff01");else{var o="";o+="id="+e+"&startTime="+$("#shiftStartTime").val()+"&endTime="+$("#shiftEndTime").val()+"&isNextDay="+i,$.ajax({type:"post",url:"userScheduleShift/updateScheduleShiftInfo.action",timeout:6e4,dataType:"json",data:o,success:function(o){var r="",s="";600005==o.result?(s=o.message,r=1==i?'<div href="javascript:void(0)" onclick="updateScheduleShiftInfo('+e+",'"+t+"','"+$("#shiftStartTime").val()+"','"+$("#shiftEndTime").val()+"',"+i+","+n+');">'+t+"<br>"+$("#shiftStartTime").val()+"-(\u6b21)"+$("#shiftEndTime").val()+"</div>":'<div href="javascript:void(0)" onclick="updateScheduleShiftInfo('+e+",'"+t+"','"+$("#shiftStartTime").val()+"','"+$("#shiftEndTime").val()+"',"+i+","+n+');">'+t+"<br>"+$("#shiftStartTime").val()+"-"+$("#shiftEndTime").val()+"</div>",$("#shiftName_"+e+"_"+n).html(r)):(s=ConfigCN[o.result],errorNotify(null,s)),a.close()},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})}function queryParams_bcgl(e){var t={limit:e.limit,offset:e.offset,info:$("#info").val().trim()};return t}function queryParams_bcgl_read(e){var t={limit:e.limit,offset:e.offset,id:bcglReadId};return t}var ValidatorMorning=!0,ValidatorNoon=!0,ValidatorNight=!0,morningUsersIdArray=new Array,noonUsersIdArray=new Array,nightUsersIdArray=new Array,UsersIdArray=new Array,bcglReadId=0,TempUserType="",$table=$("#table-bcgl");$table.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"userScheduleShift/queryUserScheduleShiftByPage.action",dataType:"json",striped:!0,toolbar:"#toolbar",uniqueId:"id",pagination:!0,singleSelect:!1,search:!1,sortable:!1,sidePagination:"server",queryParams:queryParams_bcgl,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,a){return a+1}},{title:"\u914d\u5c5e\u5c40",field:"trainBureauName",align:"center",valign:"middle"},{title:"\u914d\u5c5e\u6bb5",field:"trainStationName",align:"center",valign:"middle"},{title:"\u914d\u5c5e\u8f66\u95f4",field:"trainShopName",align:"center",valign:"middle"},{title:"\u65e5\u671f",field:"attendanceDate",align:"center",valign:"middle"},{title:"\u64cd\u4f5c",field:"cz",align:"center",valign:"middle",formatter:function(e,t,a){var i="";return i=t.attendanceDate>=moment().format("YYYY-MM")?'<button class="btn btn-primary" type="submit" onclick="bcgl_read('+t.id+","+t.trainShopId+',\'read\');">\u67e5\u770b</button> <button class="btn btn-primary" type="submit" onclick="bcgl_read('+t.id+","+t.trainShopId+',\'edit\');">\u7f16\u8f91\u4eba\u5458</button> <button class="btn btn-primary" type="submit" onclick="bcgl_delOne('+t.id+');">\u5220\u9664</button>':'<button class="btn btn-primary" type="submit" onclick="bcgl_read('+t.id+","+t.trainShopId+',\'read\');">\u67e5\u770b</button> <button class="btn btn-primary" disabled>\u7f16\u8f91\u4eba\u5458</button> <button class="btn btn-primary" type="submit" onclick="bcgl_delOne('+t.id+');">\u5220\u9664</button>'}}]}),$("#bcgl_add").click(function(){morningUsersIdArray=new Array,noonUsersIdArray=new Array,nightUsersIdArray=new Array;var e=new Array,t="";$.ajax({type:"post",url:"selectObject/getRailwayBureau.action",contentType:"application/json",dataType:"json",success:function(a){$.each(a,function(e,a){t+='<option value="'+a.value+'">'+a.text+"</option>"}),e=["\u65e9\u73ed1","\u4e2d\u73ed1","\u665a\u73ed1","\u65e9\u73ed2","\u4e2d\u73ed2","\u665a\u73ed2","\u65e9\u73ed3","\u4e2d\u73ed3","\u665a\u73ed3"];var i="";i+='<div class="row"><div class="col-sm-12"><div class="form-horizontal" id="FormValidator">',i+='<br><div class="form-group"><div class="col-sm-3"><select id="RailwayBureau2" name="RailwayBureau2" class="selectpicker form-control" data-live-search="true"><option value="">\u9009\u62e9\u914d\u5c5e\u5c40</option>'+t+'</select></div><div class="col-sm-3"><select id="RailwayStation2" name="RailwayStation2" class="selectpicker form-control" data-live-search="true"><option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option></select></div><div class="col-sm-3"><select id="TrainShop2" name="TrainShop2" class="selectpicker form-control" data-live-search="true"><option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option></select></div><div class="col-sm-3"><div class="input-group date attendanceDate"><input type="text" class="form-control" id="attendanceDate" name="attendanceDate" value="" placeholder="\u8bf7\u9009\u62e9\u8003\u52e4\u6708\u4efd" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-calendar"></span></span></div></div></div>',i+='<div id="BC_Body">',i+="<hr>",$.each(e,function(e,t){i+='<div class="form-group"><label class="col-sm-1 control-label checkbox">'+t+'</label><div class="col-sm-4"><div class="input-group date shiftStartTime"><input type="text" class="form-control" id="shiftStartTime'+e+'" name="shiftStartTime'+e+'" value="" placeholder="\u5f00\u59cb\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div><label class="col-sm-2 control-label checkbox"><label><input id="isNextDay'+e+'" type="checkbox"> \u6b21\u65e5</label></label><div class="col-sm-4"><div class="input-group date shiftEndTime"><input type="text" class="form-control" id="shiftEndTime'+e+'" name="shiftEndTime'+e+'" value="" placeholder="\u7ed3\u675f\u65f6\u95f4" readonly><span class="input-group-addon input-sm"><span class="glyphicon glyphicon-time"></span></span></div></div></div>',(e+1)%3==0&&8!=e&&(i+="<hr>")}),i+="</div>",i+="</div></div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u6dfb\u52a0\u73ed\u6b21\u8868",message:i,onshown:function(e){UsersIdArray=new Array,$(".selectpicker").selectpicker("refresh");var t=new Date;$("#startDate2").val(new Date(t).format("yyyy-MM-01")),$("#endDate2").val(new Date(t).format("yyyy-MM-dd")),$("#RailwayBureau2").change(function(){if(""!=$(this).val()){var e="";e="trainBureauId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayStation.action",dataType:"json",data:e,success:function(e){$("#RailwayStation2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(e,function(e,t){$("#RailwayStation2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u6bb5\u4fe1\u606f\uff01")}})}else $("#RailwayStation2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),
$("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#RailwayStation2").change(function(){if(""!=$(this).val()){var e="";e="trainBureauId="+$("#RailwayBureau2").val()+"&trainStationId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayShop.action",dataType:"json",data:e,success:function(e){$("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(e,function(e,t){$("#TrainShop2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u8f66\u95f4\u4fe1\u606f\uff01")}})}else $("#TrainShop2").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$(".attendanceDate").datetimepicker({format:"yyyy-mm",autoclose:!0,startView:3,minView:3,forceParse:!1,language:"zh-CN",pickerPosition:"bottom-left"}),$(".shiftStartTime").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5,pickerPosition:"top-left"}),$(".shiftEndTime").datetimepicker({format:"hh:ii",autoclose:!0,maxView:"hour",language:"zh-CN",startView:"day",minuteStep:5,pickerPosition:"top-left"})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(t){if(""==$("#RailwayBureau2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u5c40",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#RailwayStation2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u6bb5",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#TrainShop2").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u914d\u5c5e\u8f66\u95f4",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else if(""==$("#attendanceDate").val())BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u9009\u62e9\u8003\u52e4\u6708\u4efd",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]});else{var a=0,i=0,o=0;$("#morning").is(":checked")&&(a=1),$("#noon").is(":checked")&&(i=1),$("#night").is(":checked")&&(o=1);var n=new Array;$.each(e,function(e,t){var a=new Object;a.trainBureauId=$("#RailwayBureau2").val(),a.trainStationId=$("#RailwayStation2").val(),a.trainShopId=$("#TrainShop2").val(),a.attendanceDate=$("#attendanceDate").val(),a.shiftName=t,a.shiftStartTime=$("#shiftStartTime"+e).val(),a.shiftEndTime=$("#shiftEndTime"+e).val(),a.shiftType=e+1,$("#isNextDay"+e).prop("checked")?a.isNextDay=1:a.isNextDay=0,void 0!=UsersIdArray[e]?a.usersId=UsersIdArray[e]:a.usersId=[],n.push(a)});var r="";r=JSON.stringify(n),$.ajax({type:"post",contentType:"application/json",url:"userScheduleShift/saveScheduleShiftUserInfo.action",timeout:6e4,dataType:"json",data:r,success:function(e){var a="";600009==e.result?(a=e.message,errorNotify(null,a)):a=ConfigCN[e.result],6e5==e.result&&($("#table-bcgl").bootstrapTable("refresh"),t.close(),BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:a,buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u5c40\u4fe1\u606f\uff01")}})}),$("#bcgl_dr").click(function(){var e="";e+='<div class="table row"><div class="form-horizontal">',e+='<div class="form-group col-sm-12"><div class="col-sm-12" id="DrTip">\u8bf7\u9009\u62e9\u9700\u8981\u5bfc\u5165\u7684Excel\u6587\u4ef6。</div></div>',e+='<div class="form-group col-sm-12"><div class="col-sm-12"><input id="file_excel" name="file_excel" class="file" type="file" accept="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"></div></div>',e+="</div></div>",BootstrapDialog.show({title:"\u73ed\u6b21\u4fe1\u606f\u5bfc\u5165",message:e,onshown:function(e){$("#file_excel").fileinput({language:"zh",uploadUrl:"userScheduleShift/importSchedule.action",allowedFileExtensions:["xls","xlsx"],showPreview:!1,browseClass:"btn btn-primary",dropZoneEnabled:!1,maxFileCount:1,enctype:"multipart/form-data",validateInitialCount:!1}),$("#file_excel").on("filelock",function(e,t,a){$("#DrTip").html('<i class="fa fa-spinner fa-spin"></i> \u73ed\u6b21\u4fe1\u606f\u6b63\u5728\u5bfc\u5165\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85...')}),$("#file_excel").on("fileuploaded",function(t,a,i,o){if($("#table-bcgl").bootstrapTable("refresh"),600007==a.response.code)$("#DrTip").html("\u73ed\u6b21\u5bfc\u5165\u5b8c\u6210\uff01"),BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u5bfc\u5165\u7ed3\u679c\u67e5\u770b",message:"\u5bfc\u5165\u6210\u529f\uff1a"+a.response.importSucc+"\u6761。",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]}),e.close();else{var n="";n+='<table id="table-kcpb_dr">',n+="<thead><tr><th>\u5e8f\u53f7</th><th>\u6821\u9a8c\u4fe1\u606f</th></tr></thead>",n+="<tbody>",a.response.result.jsonArray.forEach(function(e,t){n+="<tr><td>"+(t+1)+"</td><td>"+e+"</td></tr>"}),n+="</tbody>",n+="</table>",e.close(),BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u5bfc\u5165\u5931\u8d25",message:n,onshown:function(e){$("#table-kcpb_dr").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}})}),$("#serach_button").click(function(){$("#table-bcgl").bootstrapTable("refresh")}),$("#bcgl_Template").click(function(e){window.open("excelTemplate/schedule_import_template.xlsx")});