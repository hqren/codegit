function getTrainInstallChangeInfoCount(){$("#countAll").html('<i class="fa fa-spinner fa-spin"></i>'),$("#countAllChang").html('<i class="fa fa-spinner fa-spin"></i>'),$("#countStatus").html('<i class="fa fa-spinner fa-spin"></i>'),$("#countBureau").html('<i class="fa fa-spinner fa-spin"></i>'),$("#countOther").html('<i class="fa fa-spinner fa-spin"></i>');var t="";updateYear=$("#updateYear").val(),updateMonth=$("#updateMonth").val(),bureauOld=$("#RailwayBureau").val(),deviceAssetsStatusOld=$("#devAssetsStatus").val(),null==car_type&&(car_type=""),t="updateYear="+updateYear+"&updateMonth="+updateMonth+"&bureauOld="+bureauOld+"&deviceAssetsStatusOld="+deviceAssetsStatusOld+"&car_type="+car_type,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"trainInstallChangeInfo/getTrainInstallChangeInfoCount.action",timeout:6e4,dataType:"json",data:t,success:function(t){$("#countAll").html(t.countAll),$("#countAllChang").html(t.countAllChang),$("#countStatus").html(t.countStatus),$("#countBureau").html(t.countBureau),$("#countOther").html(t.countOther)},error:function(t,e,a){"timeout"==e&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(t){t.close()}}]})}})}function queryParams_bdtj(t){void 0!=$.cookie("car_type")&&0!=$.cookie("car_type")?car_type=$.cookie("car_type"):car_type=null;var e={limit:t.limit,offset:t.offset,updateYear:$("#updateYear").val(),updateMonth:$("#updateMonth").val(),bureauOld:$("#RailwayBureau").val(),deviceAssetsStatusOld:$("#devAssetsStatus").val(),car_type:car_type};return e}var $table=$("#table-bdtj");$table.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"trainInstallChangeInfo/getTrainInstallChangeInfo.action",dataType:"json",striped:!0,toolbar:"#toolbar",uniqueId:"devId",pagination:!0,singleSelect:!1,sortable:!1,sidePagination:"server",queryParams:queryParams_bdtj,columns:[{title:"\u5e8f\u53f7",field:"devId",align:"center",valign:"middle",formatter:function(t,e,a){return a+1}},{title:"\u8bbe\u5907\u5e8f\u5217\u53f7",field:"mac",align:"center",valign:"middle"},{title:"\u914d\u5c5e\u5c40<br>(\u53d8\u66f4\u524d/\u53d8\u66f4\u540e)",field:"bureauOld",align:"center",valign:"middle",formatter:function(t,e,a){var n,l,r;return n="-",l=t,r=e.bureauNew,null!=l&&""!=l||(l="\u65e0"),null!=r&&""!=r||(r="\u65e0"),"\u65e0"==l&&"\u65e0"==r||(n=l+" -> "+r),n}},{title:"\u914d\u5c5e\u6bb5<br>(\u53d8\u66f4\u524d/\u53d8\u66f4\u540e)",field:"stationOld",align:"center",valign:"middle",formatter:function(t,e,a){var n,l,r;return n="-",l=t,r=e.stationNew,null!=l&&""!=l||(l="\u65e0"),null!=r&&""!=r||(r="\u65e0"),"\u65e0"==l&&"\u65e0"==r||(n=l+" -> "+r),n}},{title:"\u914d\u5c5e\u8f66\u95f4<br>(\u53d8\u66f4\u524d/\u53d8\u66f4\u540e)",field:"shopOld",align:"center",valign:"middle",formatter:function(t,e,a){var n,l,r;return n="-",l=t,r=e.shopNew,null!=l&&""!=l||(l="\u65e0"),null!=r&&""!=r||(r="\u65e0"),"\u65e0"==l&&"\u65e0"==r||(n=l+" -> "+r),n}},{title:"\u8f66\u6b21<br>(\u53d8\u66f4\u524d/\u53d8\u66f4\u540e)",field:"lineOld",align:"center",valign:"middle",formatter:function(t,e,a){var n,l,r;return n="-",l=t,r=e.lineNew,null!=l&&""!=l||(l="\u65e0"),null!=r&&""!=r||(r="\u65e0"),"\u65e0"==l&&"\u65e0"==r||(n=l+" -> "+r),n}},{title:"\u7ec4\u522b<br>(\u53d8\u66f4\u524d/\u53d8\u66f4\u540e)",field:"groupOld",align:"center",valign:"middle",formatter:function(t,e,a){var n,l,r;return n="-",l=t,r=e.groupNew,null!=l&&""!=l||(l="\u65e0"),null!=r&&""!=r||(r="\u65e0"),"\u65e0"==l&&"\u65e0"==r||(n=l+" -> "+r),n}},{title:"\u8f66\u53f7<br>(\u53d8\u66f4\u524d/\u53d8\u66f4\u540e)",field:"carriageNoOld",align:"center",valign:"middle",formatter:function(t,e,a){var n,l,r;return n="-",l=t,r=e.carriageNoNew,null!=l&&""!=l||(l="\u65e0"),null!=r&&""!=r||(r="\u65e0"),"\u65e0"==l&&"\u65e0"==r||(n=l+" -> "+r),n}},{title:"\u72b6\u6001<br>(\u53d8\u66f4\u524d/\u53d8\u66f4\u540e)",field:"deviceAssetsStatusOld",align:"center",valign:"middle",formatter:function(t,e,a){var n,l,r;return n="-",l=t,r=e.deviceAssetsStatusNew,null!=l&&""!=r||(l="\u65e0"),null!=r&&""!=r||(r="\u65e0"),"\u65e0"==l&&"\u65e0"==r||(n=l+" -> "+r),n}}]}),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayBureauName.action",dataType:"json",success:function(t){$.each(t,function(t,e){$("#RailwayBureau").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u5c40\u4fe1\u606f\uff01")}}),getTrainInstallChangeInfoCount(),$("#serach_button").click(function(){$("#table-bdtj").bootstrapTable("refresh"),getTrainInstallChangeInfoCount()}),$("#bdtj_download").click(function(){updateYear=$("#updateYear").val(),updateMonth=$("#updateMonth").val(),bureauOld=$("#RailwayBureau").val(),deviceAssetsStatusOld=$("#devAssetsStatus").val(),null==car_type&&(car_type=""),window.open("trainInstallChangeInfo/exportTrainInstallChangeInfo.action?updateYear="+updateYear+"&updateMonth="+updateMonth+"&bureauOld="+bureauOld+"&deviceAssetsStatusOld="+deviceAssetsStatusOld+"&car_type="+car_type)});