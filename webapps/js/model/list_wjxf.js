function getDownType2(){var o=JSON.parse(localStorage.getItem("down_type"));null!=o&&""!=o?($.each(o.list,function(o,t){$("#DownType").append('<option value="'+t.value+'">'+t.name+"</option>")}),$(".selectpicker").selectpicker("refresh")):errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u4e0b\u53d1\u7c7b\u578b\u4fe1\u606f\uff01")}function downloadType2(){$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/findDownloadexType.action",dataType:"json",success:function(o){$("#downloadType2").html(""),$.each(o,function(o,t){$("#downloadType2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u4e0b\u53d1\u7c7b\u578b\u4fe1\u606f\uff01")}})}function wjxf_read(o,t){JobID=o;var e="";e+='<div class="table row"><div class="form-horizontal">',e+='<div class="form-group"><label class="col-sm-2 control-label">\u4efb\u52a1ID</label><div class="col-sm-8"><p class="form-control-static">'+t+'</p></div><div class="col-sm-2"><a class="btn btn-primary" role="button" data-toggle="collapse" href="#ShowInfo" aria-expanded="false" aria-controls="ShowInfo">\u67e5\u770b\u57fa\u672c\u4fe1\u606f</a></div></div>',e+='<div class="collapse" id="ShowInfo"></div><br>',e+='<div class="table"><div class="col-sm-2"><select id="status2" name="status2" class="selectpicker form-control" data-live-search="true"><option value="">\u9009\u62e9\u4e0b\u53d1\u72b6\u6001</option><option value="0">\u5f85\u4e0b\u53d1</option><option value="1">\u5df2\u4e0b\u53d1</option></select></div><div class="col-sm-3"><select id="DownStatus2" name="DownStatus2" class="selectpicker form-control" data-live-search="true"></select></div><div class="col-sm-7"><div class="input-group"><input type="text" id="mac" class="form-control" placeholder="\u8bf7\u8f93\u5165MAC\u5730\u5740"><div class="input-group-btn"><button id="serach_button2" class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-search"></i></button></div></div></div></div>',e+="</div></div>",e+='<table id="table-wjxf_read"></table>',BootstrapDialog.show({title:"\u4e0b\u53d1\u4efb\u52a1\u67e5\u770b",message:e,cssClass:"FullScreen-dialog",onshown:function(o){var t=JSON.parse(localStorage.getItem("downStatus"));null!=t&&""!=t?($("#DownStatus2").html('<option value="">\u9009\u62e9\u6267\u884c\u7ed3\u679c</option>'),$.each(t.list,function(o,t){$("#DownStatus2").append('<option value="'+t.value+'">'+t.name+"</option>")})):errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u6267\u884c\u7ed3\u679c\u4fe1\u606f\uff01"),$(".selectpicker").selectpicker("refresh");var e="";e="downloadex_job_id="+JobID,$.ajax({type:"post",url:"downloadexJob/getDownloadexJobDetail.action",data:e,dataType:"json",success:function(o){var t=o.md5Type;"0"==t&&(t="FULL_READ"),"1"==t&&(t="PARTIAL_10MB");var e="";e+='<div class="form-group"><label class="col-sm-2 control-label">\u76ee\u6807\u6587\u4ef6\u6839\u76ee\u5f55</label><div class="col-sm-4"><p class="form-control-static">'+o.targetRootPath+'</p></div><label class="col-sm-2 control-label">\u76ee\u6807\u538b\u7f29\u6587\u4ef6\u540d</label><div class="col-sm-4"><p class="form-control-static">'+o.targetZipFileName+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u83b7\u53d6\u6587\u4ef6\u65b9\u5f0f</label><div class="col-sm-4"><p class="form-control-static">'+o.sourcePathType+'</p></div><label class="col-sm-2 control-label">\u4e0b\u8f7d\u8def\u5f84</label><div class="col-sm-4"><p class="form-control-static">'+o.sourcePath+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u6587\u4ef6\u8bbf\u95ee\u4ee4\u724c</label><div class="col-sm-4"><p class="form-control-static">'+o.fileAccessToken+'</p></div><label class="col-sm-2 control-label">\u538b\u7f29\u6587\u4ef6MD5\u7c7b\u578b</label><div class="col-sm-4"><p class="form-control-static">'+t+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u538b\u7f29\u6587\u4ef6MD5</label><div class="col-sm-4"><p class="form-control-static">'+o.md5+'</p></div><label class="col-sm-2 control-label">\u5206\u7ec4\u540d\u79f0</label><div class="col-sm-4"><p class="form-control-static">'+o.groupNames+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u66f4\u65b0\u65f6\u95f4</label><div class="col-sm-4"><p class="form-control-static">'+o.update_time+'</p></div><label class="col-sm-2 control-label">\u4e0b\u8f7d\u6587\u4ef6\u5927\u5c0f</label><div class="col-sm-4"><p class="form-control-static">'+o.sourceFileLength+" byte</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u6587\u4ef6\u5939\u6570\u76ee</label><div class="col-sm-4"><p class="form-control-static">'+o.totalDirCount+'</p></div><label class="col-sm-2 control-label">\u6587\u4ef6\u6570\u76ee</label><div class="col-sm-4"><p class="form-control-static">'+o.totalFileCount+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u6587\u4ef6\u5927\u5c0f</label><div class="col-sm-4"><p class="form-control-static">'+o.totalFileSize+' byte</p></div><label class="col-sm-2 control-label">\u6700\u5c0f\u6587\u4ef6\u5927\u5c0f</label><div class="col-sm-4"><p class="form-control-static">'+o.minFileSize+" byte</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u6700\u5927\u6587\u4ef6\u5927\u5c0f</label><div class="col-sm-4"><p class="form-control-static">'+o.maxFileSize+' byte</p></div><label class="col-sm-2 control-label">eval</label><div class="col-sm-4"><p class="form-control-static">'+o.eval+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">valueNeeded</label><div class="col-sm-10"><p class="form-control-static">'+o.valueNeeded+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u63cf\u8ff0</label><div class="col-sm-10"><p class="form-control-static">'+o.description+"</p></div></div>",$("#ShowInfo").html(e)}});var a=$("#table-wjxf_read");a.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexDevJob/getDownloadexDevJob.action",dataType:"json",striped:!0,uniqueId:"devClientVersionId",pagination:!0,sortable:!1,sidePagination:"server",queryParams:queryParams_wjxf_read,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(o,t,e){return e+1}},{title:"MAC\u5730\u5740",field:"mac",align:"center",valign:"middle"},{title:"\u8bbe\u5907\u5728\u7ebf\u72b6\u6001",field:"devStatus",align:"center",valign:"middle"},{title:"\u6d88\u606f",field:"message",align:"center",valign:"middle",width:200},{title:"\u4e0b\u53d1\u72b6\u6001",field:"status",align:"center",valign:"middle",formatter:function(o,t,e){if(null!=o){if("0"==o)return"\u5f85\u4e0b\u53d1";if("1"==o)return"\u5df2\u4e0b\u53d1";if("-3"==o)return"\u6682\u505c";if("-2"==o)return"\u505c\u6b62"}return"-"}},{title:"\u6267\u884c\u7ed3\u679c",field:"downStatus",align:"center",valign:"middle",formatter:function(o,t,e){return downloadStatusCN(o)}},{title:"\u66f4\u65b0\u65f6\u95f4",field:"update_time",align:"center",valign:"middle",formatter:function(o,t,e){return new Date(o.replace(/-/g,"/")).format("yyyy-MM-dd HH:mm:ss")}},{title:"\u64cd\u4f5c",field:"status",align:"center",valign:"middle",formatter:function(o,t,e){var a="";return"-3"==o&&(a+='<button class="btn btn-primary" type="submit" onclick="wjxf_pause_reset2('+t.downloadex_job_id+",'"+t.mac+"');\">\u6fc0\u6d3b</button>"),a+=' <button class="btn btn-primary" type="submit" onclick="getDownLoadJobList2('+t.downloadex_job_id+",'"+t.mac+"');\">\u67e5\u770b</button>"}}]}),$("#serach_button2").click(function(){$("#table-wjxf_read").bootstrapTable("refresh")})},buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}function wjxf_fail(o){var t="";t="downloadex_job_id="+o,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/getDownloadexJobDownStatusCountList.action",timeout:6e4,dataType:"json",data:t,success:function(o){var t="";t+='<table id="table-wjxf_fail">',t+="<thead><tr><th>\u72b6\u6001</th><th>\u72b6\u6001\u63cf\u8ff0</th><th>\u6761\u6570</th></tr></thead>",t+="<tbody>",$.each(o,function(o,e){"1"!=e.downloadStatus&&(t+="<tr><td>"+e.downloadStatus+"</td><td>"+downloadStatusCN(e.downloadStatus)+"</td><td>"+e.failCount+"</td></tr>")}),t+="</tbody>",t+="</table>",BootstrapDialog.show({title:"\u8be6\u60c5",message:t,onshown:function(o){$("#table-wjxf_fail").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}function getDownLoadJobList2(o,t){if(""!=o&&""!=t){var e="";e="downloadex_job_id="+o+"&macs="+t,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/getDownLoadJobList.action",timeout:6e4,dataType:"json",data:e,success:function(o){var e="";e+='<table id="table-getDownLoadJobList2">',e+="<thead><tr><th>\u6267\u884c\u5e8f\u5217</th><th>JobId</th><th>\u4efb\u52a1\u63cf\u8ff0</th><th>\u72b6\u6001</th><th>\u5206\u53d1\u65f6\u95f4</th><th>\u64cd\u4f5c</th></tr></thead>",e+="<tbody>",$.each(o[t],function(o,a){var l="none";"0"==a.downStatus?l="\u672a\u4e0b\u53d1":"1"==a.downStatus?l="\u4e0b\u53d1\u4e2d":"-3"==a.downStatus&&(l="\u6682\u505c"),e+="<tr><td>"+parseInt(o+1)+"</td><td>"+a.jobId+"</td><td>"+a.description+"</td><td>"+l+"</td><td>"+a.update_time+'</td><td><button class="btn btn-primary" type="submit" onclick="wjxf_stopOne('+a.jobId+",'"+t+"');\">\u505c\u6b62</button></td></tr>"}),e+="</tbody>",e+="</table>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u67e5\u770b\u6267\u884c\u4efb\u52a1",message:e,onshown:function(o){$("#table-getDownLoadJobList2").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}else{var a="";a+='<div class="table row"><div class="form-horizontal">',a+='<div class="table"><div class="col-sm-12"><div class="input-group"><input type="text" id="mac" class="form-control" placeholder="\u8bf7\u8f93\u5165MAC\u5730\u5740"><div class="input-group-btn"><button id="serach_button2" class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-search"></i></button></div></div></div></div>',a+="</div></div>",a+='<div id="table2"></div>',BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u67e5\u770b\u6267\u884c\u4efb\u52a1",message:a,onshown:function(o){$("#serach_button2").click(function(){t=$("#mac").val(),$("#table2").html("");var o="";o="&macs="+t,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/getDownLoadJobList.action",timeout:6e4,dataType:"json",data:o,success:function(o){var e="";e+='<table id="table-getDownLoadJobList2">',e+="<thead><tr><th>\u6267\u884c\u5e8f\u5217</th><th>JobId</th><th>\u4efb\u52a1\u63cf\u8ff0</th><th>\u72b6\u6001</th><th>\u5206\u53d1\u65f6\u95f4</th><th>\u64cd\u4f5c</th></tr></thead>",e+="<tbody>",$.each(o[t],function(o,a){var l="none";"0"==a.downStatus?l="\u672a\u4e0b\u53d1":"1"==a.downStatus?l="\u4e0b\u53d1\u4e2d":"-3"==a.downStatus&&(l="\u6682\u505c"),e+="<tr><td>"+parseInt(o+1)+"</td><td>"+a.jobId+"</td><td>"+a.description+"</td><td>"+l+"</td><td>"+a.update_time+'</td><td><button class="btn btn-primary" type="submit" onclick="wjxf_stopOne('+a.jobId+",'"+t+"');\">\u505c\u6b62</button></td></tr>"}),e+="</tbody>",e+="</table>",$("#table2").html(e),$("#table-getDownLoadJobList2").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})})},buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}}function wjxf_fail_reset(o,t){BootstrapDialog.confirm({title:"\u91cd\u65b0\u4e0b\u53d1\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u91cd\u65b0\u4e0b\u53d1\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(e){if(e){var a="";a="downloadex_job_id="+o+"&downStatus="+t,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexDevJob/resendDownloadexDevJob.action",timeout:6e4,dataType:"json",data:a,success:function(o){var t="";return t=600009==o.result?o.message:ConfigCN[o.result],600010!=o.result?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1):($("#table-wjxf").bootstrapTable("refresh"),void errorNotify(null,t))},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}}})}function wjxf_pause(o){var t="";t="downloadex_job_id="+o,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/getPauseStatusCountList.action",timeout:6e4,dataType:"json",data:t,success:function(t){var e="";e+='<table id="table-wjxf_pause">',e+="<thead><tr><th>\u6682\u505c\u72b6\u6001</th><th>\u72b6\u6001\u63cf\u8ff0</th><th>\u5931\u8d25\u6761\u6570</th><th>\u64cd\u4f5c</th></tr></thead>",e+="<tbody>",$.each(t,function(t,a){var l="";l='<button class="btn btn-primary" type="submit" onclick="wjxf_pause_reset('+o+",'"+a.downStatus+'\');">\u6fc0\u6d3b</button> <button class="btn btn-primary" type="submit" onclick="stopDownloadexByStatus('+o+",'"+a.downStatus+"');\">\u505c\u6b62</button>","0"!=a.downStatus&&"1"!=a.downStatus&&(e+="<tr><td>"+a.downStatus+"</td><td>"+downStatusCN(a.downStatus)+"</td><td>"+a.failCount+"</td><td>"+l+"</td></tr>")}),e+="</tbody>",e+="</table>",BootstrapDialog.show({title:"\u6682\u505c\u8be6\u60c5",message:e,onshown:function(o){$("#table-wjxf_pause").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}function wjxf_pause_reset(o,t){BootstrapDialog.confirm({title:"\u6fc0\u6d3b\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u6fc0\u6d3b\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(e){if(e){var a="";a="downloadex_job_id="+o+"&downStatus="+t,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/activateDownloadexDevJob.action",timeout:6e4,dataType:"json",data:a,success:function(o){var t="";return t=600009==o.result?o.message:ConfigCN[o.result],600018!=o.result?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1):($("#table-wjxf").bootstrapTable("refresh"),void errorNotify(null,t))},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}}})}function stopDownloadexByStatus(o,t){BootstrapDialog.confirm({title:"\u505c\u6b62\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u505c\u6b62\u4efb\u52a1\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(e){if(e){var a="";a="downloadex_job_id="+o+"&downStatus="+t,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/stopDownloadexByStatus.action",timeout:6e4,dataType:"json",data:a,success:function(o){var t="";return t=600009==o.result?o.message:ConfigCN[o.result],600018!=o.result?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1):($("#table-wjxf").bootstrapTable("refresh"),void errorNotify(null,t))},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}}})}function wjxf_pause_reset2(o,t){BootstrapDialog.confirm({title:"\u6fc0\u6d3b\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u6fc0\u6d3b\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(e){if(e){var a="";a="downloadex_job_id="+o+"&macs="+t,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/activateDownloadexDevJobByMac.action",timeout:6e4,dataType:"json",data:a,success:function(o){var t="";return t=600009==o.result?o.message:ConfigCN[o.result],600016!=o.result?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1):($("#table-wjxf").bootstrapTable("refresh"),void errorNotify(null,t))},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}}})}function wjxf_stop(o){BootstrapDialog.confirm({title:"\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u505c\u6b62\u6240\u9009\u4efb\u52a1\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(t){if(t){var e="";e="jobId="+o,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/stopDownloadex.action",timeout:6e4,dataType:"json",data:e,success:function(t){var e="";return e=600009==t.result?t.message:ConfigCN[t.result],600016!=t.result?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:e,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1):($("#stop_"+o).hide(),$("#taskIng_"+o).show(),errorNotify(null,e),void 0)},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}}})}function wjxf_stopOne(o,t){BootstrapDialog.confirm({title:"\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u505c\u6b62\u6240\u9009\u4efb\u52a1\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(e){if(e){var a="";a="jobId="+o+"&macs="+t,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/stopDownloadexByJobIdAndMacs.action",timeout:6e4,dataType:"json",data:a,success:function(t){var e="";return e=600009==t.result?t.message:ConfigCN[t.result],600016!=t.result?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:e,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1):($("#stop_"+o).hide(),$("#taskIng_"+o).show(),errorNotify(null,e),void 0)},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}}})}function wjxf_taskIng(o){BootstrapDialog.confirm({title:"\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u6062\u590d\u6240\u9009\u4efb\u52a1\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(t){if(t){var e="";e="downloadex_job_id="+o,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/recoverDevJob.action",timeout:6e4,dataType:"json",data:e,success:function(t){var e="";return e=600009==t.result?t.message:ConfigCN[t.result],600014!=t.result?(BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:e,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1):($("#stop_"+o).show(),$("#taskIng_"+o).hide(),errorNotify(null,e),void 0)},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}}})}function wjxf_downStatus(o,t){BootstrapDialog.confirm({title:"\u786e\u8ba4\u63d0\u9192",message:"\u662f\u5426\u786e\u8ba4\u4e0b\u53d1\u6240\u9009\u4efb\u52a1\uff1f",closable:!0,draggable:!0,btnCancelLabel:"\u53d6\u6d88",btnOKLabel:"\u786e\u8ba4",callback:function(e){if(e){var a="";a="downloadex_job_id="+o+"&downStatus="+t,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/updateDownloadexJobStatus.action",timeout:6e4,dataType:"json",data:a,success:function(o){var t="";t=600009==o.result?o.message:ConfigCN[o.result],BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}}})}function queryParams_wjxf(o){var t={limit:o.limit,offset:o.offset,downloadex_job_id:JobID,car_type:car_type,job_id:$("#jobID").val(),description:$("#description").val(),update_time:$("#updateTime").val(),env:$("#env").val()};return t}function queryParams_wjxf_read(o){var t={limit:o.limit,offset:o.offset,downloadex_job_id:JobID,car_type:car_type,downStatus:$("#DownStatus2").val(),status:$("#status2").val(),mac:$("#mac").val()};return t}var dataCustom="",$table=$("#table-wjxf");$table.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/getDownloadexJob.action",dataType:"json",striped:!0,toolbar:"#toolbar",uniqueId:"downloadex_job_id",pagination:!0,singleSelect:!0,sortable:!1,sidePagination:"server",queryParams:queryParams_wjxf,idField:"downloadex_job_id",columns:[{idfield:"state",align:"center",valign:"middle",checkbox:!0},{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(o,t,e){return e+1}},{title:"\u4efb\u52a1ID",field:"job_id",align:"center",valign:"middle"},{title:"\u6587\u4ef6\u5927\u5c0f",field:"sourceFileLength",align:"center",valign:"middle"},{title:"\u4efb\u52a1\u63cf\u8ff0",field:"description",align:"center",valign:"middle"},{title:"\u4efb\u52a1\u5206\u53d1\u72b6\u6001",field:"downloadStatus",align:"center",valign:"middle",formatter:function(o,t,e){var a="";return a=downloadTaskStatusCN(o)}},{title:"\u4e0b\u53d1\u72b6\u6001",field:"downStatus",align:"center",valign:"middle",formatter:function(o,t,e){var a="";return a="0"!=t.pauseCount?"\u5f85\u4e0b\u53d1:"+t.dxfCount+",\u5df2\u4e0b\u53d1:"+t.yxfCount+",\u505c\u6b62:"+t.stopCount+',<a class="failError" href="javascript:void(0);" onclick="wjxf_pause('+t.downloadex_job_id+');">\u6682\u505c:'+t.pauseCount+"</a>":"\u5f85\u4e0b\u53d1:"+t.dxfCount+",\u5df2\u4e0b\u53d1:"+t.yxfCount+",\u505c\u6b62:"+t.stopCount+",\u6682\u505c:"+t.pauseCount}},{title:"\u4e0b\u53d1\u65f6\u95f4",field:"update_time",align:"center",valign:"middle"},{title:"\u6267\u884c\u7ed3\u679c",field:"downStatus",align:"center",valign:"middle",formatter:function(o,t,e){var a="";return a='<a class="failSuccess" href="javascript:void(0);" onclick="wjxf_fail('+t.downloadex_job_id+');">\u8fdb\u884c\u4e2d:'+t.ingCount+"</a>,\u6210\u529f:"+t.succCount}},{title:"\u64cd\u4f5c",field:"dxfCount",align:"center",valign:"middle",formatter:function(o,t,e){var a="",l="",s="",i="";return"0"==t.dxfCount&&"0"==t.pauseCount&&"0"==t.ingCount&&(l='style="display:none;"'),"0"==t.stopCount&&(s='style="display:none;"'),"-2"!=t.downloadStatus&&"-3"!=t.downloadStatus&&(i='style="display:none;"'),a+='<button id="stop_'+t.downloadex_job_id+'" class="btn btn-primary" type="submit"'+l+' onclick="wjxf_stop('+t.downloadex_job_id+');">\u505c\u6b62</button> ',a+='<button id="taskIng_'+t.downloadex_job_id+'" class="btn btn-primary" type="submit"'+s+' onclick="wjxf_taskIng('+t.downloadex_job_id+');">\u6062\u590d</button> ',a+='<button id="downStatus_'+t.downloadex_job_id+'" class="btn btn-primary" type="submit"'+i+' onclick="wjxf_downStatus('+t.downloadex_job_id+',0);">\u4e0b\u53d1</button> ',a+='<button class="btn btn-primary" type="submit" onclick="wjxf_read('+t.downloadex_job_id+",'"+t.job_id+"');\">\u67e5\u770b</button>"}}],onLoadSuccess:function(o,t){var e=$("#table-wjxf");e.find('input[name="btSelectItem"]').change(function(){1==$(this).prop("checked")?(TableID=parseInt($(this).val()),$("#wjxf_add").removeClass("disabled"),$("#wjxf_add").prop("disabled",!1),$("#wjxf_copy").removeClass("disabled"),$("#wjxf_copy").prop("disabled",!1)):(TableID=0,$("#wjxf_add").addClass("disabled"),$("#wjxf_add").prop("disabled",!0),$("#wjxf_copy").addClass("disabled"),$("#wjxf_copy").prop("disabled",!0)),-1==o.downloadStatus&&($("#wjxf_add").addClass("disabled"),$("#wjxf_add").prop("disabled",!0)),"-1"!=o.rows[$(this).parent().parent().index()].downloadStatus&&($("#wjxf_add").addClass("disabled"),$("#wjxf_add").prop("disabled",!0))})},onClickRow:function(o,t){-1!=o.downloadStatus&&($("#wjxf_add").addClass("disabled"),$("#wjxf_add").prop("disabled",!0))}}),$("#wjxf_add_rw").click(function(){var o="";o+='<div class="row"><div class="col-sm-12"><div id="FormValidator"  class="form-horizontal">',o+='<br><div class="form-group" style="display:none;"><label class="col-sm-3 control-label">\u8bbe\u5907\u5206\u7c7b</label><div class="col-sm-3"><select id="groupId" class="selectpicker form-control"><option value="1">\u5168\u90e8</option><option value="2">\u94c1\u8def</option><option value="3">\u5927\u5df4</option></select></div><div class="col-sm-4" id="select_2" style="display:none;"><select id="groupId2" class="selectpicker form-control" title="\u9009\u62e9\u5382\u5546" multiple></select></div></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">\u5b58\u653e\u8def\u5f84</label><div class="col-sm-8"><input type="text" id="folder" name="folder" class="form-control" placeholder="\u793a\u4f8b\uff1aupdate/tmppublish/update01/wfportal"></div></div>',o+='<div class="form-group" style="display:none;"><label class="col-sm-3 control-label">\u8bbe\u5907\u8def\u5f84</label><div class="col-sm-8"><input type="text" id="targetRootPath" name="targetRootPath" class="form-control" placeholder="\u8bf7\u8f93\u5165\u8bbe\u5907\u8def\u5f84"></div></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">\u4efb\u52a1\u63cf\u8ff0</label><div class="col-sm-8"><textarea id="desc" name="desc" class="form-control" rows="2"></textarea></div></div>',o+="</div></div></div>",BootstrapDialog.show({title:"\u6dfb\u52a0\u4efb\u52a1",message:o,onshown:function(o){$(".selectpicker").selectpicker("refresh"),$("#FormValidator").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{groupId:{message:"\u8bbe\u5907\u5206\u7c7b\u65e0\u6548",validators:{notEmpty:{message:"\u8bbe\u5907\u5206\u7c7b\u4e0d\u80fd\u4e3a\u7a7a"}}},folder:{message:"\u5b58\u653e\u8def\u5f84\u65e0\u6548",validators:{notEmpty:{message:"\u6587\u4ef6\u5b58\u653e\u8def\u5f84\u4e0d\u80fd\u4e3a\u7a7a"}}},desc:{message:"\u4efb\u52a1\u63cf\u8ff0\u65e0\u6548",validators:{notEmpty:{message:"\u4efb\u52a1\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a"}}}}}),$("#groupId").change(function(){$("#groupId2").html(""),1!=$(this).val()?($("#select_2").show(),2==$(this).val()&&$("#groupId2").append('<option value="4">\u4e2d\u5174\u9ad8\u8fbe</option>'),3==$(this).val()&&($("#groupId2").append('<option value="5">\u9510\u6377</option>'),$("#groupId2").append('<option value="6">\u50b2\u5929</option>')),$("#groupId2").selectpicker("refresh")):$("#select_2").hide()})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(o){if($("#FormValidator").bootstrapValidator("validate"),$("#FormValidator").data("bootstrapValidator").isValid()){groupIds=$("#groupId2").val(),null==groupIds&&(groupIds=$("#groupId").val());var t="";t="groupId="+groupIds+"&folder="+$("#folder").val()+"&targetRootPath="+$("#targetRootPath").val()+"&desc="+$("#desc").val(),$.ajax({type:"POST",url:"downloadexJob/addDownloadexJobByPost.action",data:t,dataType:"json",success:function(t){var e="";return e=600009==t.result?t.message:ConfigCN[t.result],6e5==t.result&&($("#table-wjxf").bootstrapTable("refresh"),o.close()),BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:e,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1}})}else BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"})}},{label:"\u91cd\u7f6e",action:function(o){$("#FormValidator").data("bootstrapValidator").resetForm(!0),$(".selectpicker").selectpicker("refresh")}},{label:"\u5173\u95ed",action:function(o){o.close()}}]})}),$("#wjxf_add").click(function(){var o=0;$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayBureau.action",dataType:"json",success:function(t){var e=new Array,a="";if($.each(t,function(o,t){a+='<option value="'+t.value+'">'+t.text+"</option>"}),0==TableID)return!1;var l="";l+='<div class="row"><div class="col-sm-12"><form class="form-horizontal" id="FormValidator">',l+='<br><div class="form-group" id="options_zxfs"><label class="col-sm-3 control-label">\u6267\u884c\u65b9\u5f0f</label><div class="col-sm-8"><div class="btn-group" data-toggle="buttons"><label class="btn btn-primary active"><input type="radio" name="options" id="ClickAll" value="1" checked>\u6279\u91cf</label><label class="btn btn-primary"><input type="radio" name="options" id="ClickOne" value="2">\u5206\u7ec4</label></div></div></div>',l+='<div class="form-group" id="SB_All"><label class="col-sm-3 control-label">\u6267\u884c\u8bbe\u5907</label><div class="col-sm-8"><textarea id="macs" name="macs" class="form-control" rows="2"></textarea></div></div>',l+='<div id="SB_One" style="display:none">',l+='<div class="form-group"><label class="col-sm-3 control-label">\u6267\u884c\u8bbe\u5907</label><div class="col-sm-3"><select id="groupId" class="selectpicker form-control"><option value="1">\u5168\u90e8</option><option value="2">\u94c1\u8def</option><option value="3">\u5927\u5df4</option></select></div><div class="col-sm-3" id="select_2" style="display:none;"><select id="groupId2" class="selectpicker form-control" title="\u9009\u62e9\u5382\u5546" multiple></select></div></div>',l+='<div class="form-group" id="select_3" style="display:none;"><div class="col-sm-3"></div><div class="col-sm-3"><select id="RailwayBureau2" name="RailwayBureau2" class="selectpicker form-control" data-live-search="true"><option value="-1">\u9009\u62e9\u914d\u5c5e\u5c40</option>'+a+'</select></div><div class="col-sm-3"><select id="RailwayStation2" name="RailwayStation2" class="selectpicker form-control" data-live-search="true"><option value="-1">\u9009\u62e9\u914d\u5c5e\u6bb5</option></select></div><div class="col-sm-3"><select id="TrainShop2" name="TrainShop2" class="selectpicker form-control" data-live-search="true"><option value="-1">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option></select></div></div>',l+="</div>",l+='<div class="form-group"><label class="col-sm-3 control-label">\u4e0b\u53d1\u73af\u5883</label><div class="col-sm-3"><select id="env2" class="selectpicker form-control"><option value="0">\u6b63\u5f0f</option><option value="-1">\u6d4b\u8bd5</option></select></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">\u4e0b\u53d1\u7c7b\u578b</label><div class="col-sm-3"><select id="downloadType2" class="selectpicker form-control"></select></div></div>',l+='<div class="form-group" style="display:none;"><label class="col-sm-3 control-label">\u8bbe\u5907\u8def\u5f84</label><div class="col-sm-3"><select id="targetRootPath" class="selectpicker form-control"><option value="0">hdRoot</option><option value="1">portalRoot</option></select></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">eval</label><div class="col-sm-8"><input type="text" id="eval" name="eval" class="form-control" placeholder="\u8bf7\u8f93\u5165eval" maxlength="45"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">valueNeeded</label><div class="col-sm-8"><input type="text" id="valueNeeded" name="valueNeeded" class="form-control" placeholder="\u8bf7\u8f93\u5165valueNeeded" maxlength="45"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">minPortalVer</label><div class="col-sm-8"><input type="text" id="minPortalVer" name="minPortalVer" class="form-control" placeholder="\u8bf7\u8f93\u5165minPortalVer" maxlength="45"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">minVersion</label><div class="col-sm-8"><input type="text" id="minVersion" name="minVersion" class="form-control" placeholder="\u8bf7\u8f93\u5165minVersion" maxlength="45"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">forceExecute</label><div class="col-sm-8"><input type="text" id="forceExecute" name="forceExecute" class="form-control" placeholder="\u8bf7\u8f93\u5165forceExecute\uff08true/false\uff09" maxlength="45"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">cmdBeforeMerge</label><div class="col-sm-8"><input type="text" id="cmdBeforeMerge" name="cmdBeforeMerge" class="form-control" placeholder="\u8bf7\u8f93\u5165cmdBeforeMerge" maxlength="45"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">\u662f\u5426\u5ba1\u6838</label><div class="col-sm-3"><select id="downloadStatus2" name="downloadStatus2" class="selectpicker form-control" data-live-search="true"><option value="0">\u4e0d\u542f\u7528</option><option value="-2">\u542f\u7528</option></select></div></div>',l+='<div id="wjxfInfo" style="display:none;">',l+='<div class="form-group"><label class="col-sm-3 control-label">\u914d\u5c5e\u5c40</label><div class="col-sm-3"><select id="RailwayBureau3" name="RailwayBureau3" class="selectpicker form-control" data-live-search="true">'+a+"</select></div></div>",l+='<div class="form-group validators-IcoRight"><label class="col-sm-3 control-label">\u6267\u884c\u8bbe\u5907\u6570</label><div class="col-sm-3 validators-IcoRight"><div class="input-group"><input id="devExNum" name="devExNum" type="tel" class="form-control" maxlength="3"><span class="input-group-addon">%</span></div></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">\u5185\u5bb9\u7c7b\u522b</label><div class="col-sm-3"><select id="DownType" class="selectpicker form-control"></select></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">\u5185\u5bb9\u4f4d\u7f6e</label><div class="col-sm-8"><input type="text" id="downPosition" name="downPosition" class="form-control" placeholder="\u8bf7\u8f93\u5165\u5185\u5bb9\u4f4d\u7f6e" maxlength="500"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">\u4e0b\u53d1\u8303\u56f4</label><div class="col-sm-8"><input type="text" id="downRange" name="downRange" class="form-control" placeholder="\u8bf7\u8f93\u5165\u4e0b\u53d1\u8303\u56f4" maxlength="500"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">\u8d44\u6e90\u6587\u4ef6\u8def\u5f84</label><div class="col-sm-8"><input type="text" id="resourceurl" name="resourceurl" class="form-control" placeholder="\u8bf7\u8f93\u5165\u8d44\u6e90\u6587\u4ef6\u8def\u5f84" maxlength="500"></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">\u8d44\u6e90\u56fe\u7247</label><div class="col-sm-8"><input id="file_images" name="file_images" class="file" type="file" accept="image/*" multiple></div></div>',
l+="</div>",l+="</form></div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u6dfb\u52a0\u6267\u884c\u8bbe\u5907",message:l,onshown:function(t){getDownType2(),downloadType2(),$("#file_images").fileinput({language:"zh",uploadUrl:"downloadexJob/uploadImgs.action",uploadAsync:!0,resizeImage:!1,showUpload:!1,showPreview:!0,browseClass:"btn btn-primary",dropZoneEnabled:!1,maxFileCount:20,enctype:"multipart/form-data"}).on("filebatchselected",function(o,t,a){e=[],$(this).fileinput("upload")}),$("#file_images").on("fileuploaded",function(o,t){t.response&&e.push(t.response.data)}),$("#downloadStatus2").change(function(){"-2"==$(this).val()?$("#wjxfInfo").show():$("#wjxfInfo").hide()}),$("#RailwayBureau2").change(function(){if(""!=$(this).val()){var o="";o="trainBureauId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayStation.action",dataType:"json",data:o,success:function(o){$("#RailwayStation2").html('<option value="-1">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop2").html('<option value="-1">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(o,function(o,t){$("#RailwayStation2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u6bb5\u4fe1\u606f\uff01")}})}else $("#RailwayStation2").html('<option value="-1">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop2").html('<option value="-1">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#RailwayStation2").change(function(){if(""!=$(this).val()){var o="";o="trainBureauId="+$("#RailwayBureau2").val()+"&trainStationId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayShop.action",dataType:"json",data:o,success:function(o){$("#TrainShop2").html('<option value="-1">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(o,function(o,t){$("#TrainShop2").append('<option value="'+t.value+'">'+t.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u8f66\u95f4\u4fe1\u606f\uff01")}})}else $("#TrainShop2").html('<option value="-1">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#FormValidator").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{macs:{message:"\u8bbe\u5907\u65e0\u6548",validators:{notEmpty:{message:"\u8bbe\u5907\u4e0d\u80fd\u4e3a\u7a7a"}}},devExNum:{message:"\u6267\u884c\u8bbe\u5907\u6570\u65e0\u6548",validators:{stringLength:{max:3,message:"\u6267\u884c\u8bbe\u5907\u6570\u4e0d\u80fd\u8d85\u8fc73\u4f4d\u6570"},regexp:{regexp:/^([1-9]\d?|100)$/,message:"\u6267\u884c\u8bbe\u5907\u6570\u8bf7\u8f93\u51651-100"}}}}}),$(".selectpicker").selectpicker("refresh"),$("#ClickAll").parent().click(function(){$("#SB_All").show(),$("#SB_One").hide()}),$("#ClickOne").parent().click(function(){$("#SB_All").hide(),$("#SB_One").show()}),$("#groupId").change(function(){$("#groupId2").html(""),o=0,1!=$(this).val()?($("#select_2").show(),2==$(this).val()&&($("#groupId2").append('<option value="4">\u4e2d\u5174\u9ad8\u8fbe</option>'),$("#groupId2").append('<option value="9">\u9510\u6377</option>'),$("#select_3").show(),o=1),3==$(this).val()&&($("#groupId2").append('<option value="5">\u9510\u6377</option>'),$("#groupId2").append('<option value="6">\u50b2\u5929</option>'),$("#select_3").hide()),$("#groupId2").selectpicker("refresh")):$("#select_2").hide()})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(t){if($("#FormValidator").bootstrapValidator("validate"),$("#FormValidator").data("bootstrapValidator").isValid()){var a="",l=$("#options_zxfs input:radio:checked").val();groupIds=$("#groupId2").val(),null==groupIds&&(groupIds=$("#groupId").val()),2==l&&(a="downloadex_job_id="+TableID+"&group_ids="+groupIds),1==l&&(a="downloadex_job_id="+TableID+"&macs="+$("#macs").val());var s=$.trim($("#eval").val()),i=$.trim($("#valueNeeded").val()),n=$.trim($("#minPortalVer").val()),c=$.trim($("#minVersion").val()),r=$.trim($("#forceExecute").val()),d=$("#downloadStatus2").val(),p=$("#cmdBeforeMerge").val(),u=$("#env2").val(),m=$("#downloadType2").val(),b=$("#targetRootPath").val();if(a+="&env="+encodeURIComponent(u)+"&eval="+encodeURIComponent(s)+"&valueNeeded="+encodeURIComponent(i)+"&minPortalVer="+encodeURIComponent(n)+"&minVersion="+encodeURIComponent(c)+"&forceExecute="+encodeURIComponent(r)+"&cmdBeforeMerge="+encodeURIComponent(p)+"&targetRootPath="+b+"&download_type="+m,1==o&&(a+="&trainBureauId="+$("#RailwayBureau2").val()+"&trainStationId="+$("#RailwayStation2").val()+"&trainShopId="+$("#TrainShop2").val()),"-2"==d){var v=$("#RailwayBureau3").val(),f=$.trim($("#devExNum").val()),g=$.trim($("#DownType").val()),w=$.trim($("#downPosition").val()),h=$.trim($("#downRange").val()),y=$.trim($("#resourceurl").val());a+="&trainBureauId="+v+"&devExNum="+f+"&downType="+g+"&downPosition="+encodeURIComponent(w)+"&downRange="+encodeURIComponent(h)+"&resourceurl="+encodeURIComponent(y)+"&localresourceurl="+String(e)}a+="-2"==d?"&downloadStatus=-2":"&downloadStatus=0",$.ajax({type:"post",url:"downloadexJob/updateDownloadexJob.action",timeout:6e4,dataType:"json",data:a,success:function(o){600009==o.result?Message=o.message:Message=ConfigCN[o.result],6e5==o.result&&($("#table-wjxf").bootstrapTable("refresh",{url:"downloadexJob/getDownloadexJob.action"}),TableID=0,$("#wjxf_add").addClass("disabled"),$("#wjxf_add").prop("disabled",!0),t.close()),BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:Message,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}else BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"})}},{label:"\u5173\u95ed",action:function(o){o.close()}}]})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u5c40\u4fe1\u606f\uff01")}})}),$("#wjxf_copy").click(function(){if(0==TableID)return!1;var o="";o="downloadex_job_id="+TableID,$.ajax({type:"post",url:"downloadexJob/getDownloadexJobDetail.action",data:o,dataType:"json",success:function(o){var t="";t+='<div class="row"><div class="col-sm-12"><form id="FormValidator"  class="form-horizontal">',t+='<div class="form-group"><label class="col-sm-3 control-label">\u4efb\u52a1\u63cf\u8ff0</label><div class="col-sm-8"><textarea id="desc" name="desc" class="form-control" rows="2">'+o.description+"</textarea></div></div>",t+="</form></div></div>",BootstrapDialog.show({title:"\u590d\u5236\u4efb\u52a1",message:t,onshown:function(o){$("#FormValidator").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{desc:{message:"\u4efb\u52a1\u63cf\u8ff0\u65e0\u6548",validators:{notEmpty:{message:"\u4efb\u52a1\u63cf\u8ff0\u4e0d\u80fd\u4e3a\u7a7a"}}}}})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(o){if($("#FormValidator").bootstrapValidator("validate"),$("#FormValidator").data("bootstrapValidator").isValid()){var t="";t="downloadex_job_id="+TableID+"&description="+encodeURIComponent($("#desc").val()),$.ajax({type:"POST",url:"downloadexJob/copyDownloadexJob.action",data:t,dataType:"json",success:function(t){var e="";return e=600009==t.result?t.message:ConfigCN[t.result],6e5==t.result&&($("#table-wjxf").bootstrapTable("refresh",{url:"downloadexJob/getDownloadexJob.action"}),TableID=0,$("#wjxf_add").addClass("disabled"),$("#wjxf_add").prop("disabled",!0),$("#wjxf_copy").addClass("disabled"),$("#wjxf_copy").prop("disabled",!0),o.close()),BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:e,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]}),!1}})}else BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"})}},{label:"\u91cd\u7f6e",action:function(o){$("#FormValidator").data("bootstrapValidator").resetForm(!0),$(".selectpicker").selectpicker("refresh")}},{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}),$("#getDownLoadJobList2").click(function(){getDownLoadJobList2("","")}),$("#wjxf_add_tyrh").click(function(){var o="";o+='<div class="row"><div class="col-sm-12"><div id="FormValidator"  class="form-horizontal">',o+='<br><div class="form-group"><label class="col-sm-3 control-label">\u4efb\u52a1\u63cf\u8ff0</label><div class="col-sm-8"><textarea id="description" name="description" class="form-control" rows="2"></textarea></div></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">downloadex.json</label><div class="col-sm-8"><textarea id="downloadexJson" name="downloadexJson" class="form-control" rows="2"></textarea></div></div>',o+='<div id="form-group-custom"></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">cmdBeforeDownload</label><div class="col-sm-8"><textarea id="cmdBeforeDownload" name="cmdBeforeDownload" class="form-control" rows="2"></textarea></div></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">cmdBeforeUnpack</label><div class="col-sm-8"><textarea id="cmdBeforeUnpack" name="cmdBeforeUnpack" class="form-control" rows="2"></textarea></div></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">cmdBeforeMerge</label><div class="col-sm-8"><textarea id="cmdBeforeMerge" name="cmdBeforeMerge" class="form-control" rows="2"></textarea></div></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">cmdSuccess</label><div class="col-sm-8"><textarea id="cmdSuccess" name="cmdSuccess" class="form-control" rows="2"></textarea></div></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">cmdFail</label><div class="col-sm-8"><textarea id="cmdFail" name="cmdFail" class="form-control" rows="2"></textarea></div></div>',o+="</div></div></div>",BootstrapDialog.show({title:"\u6dfb\u52a0\u901a\u7528\u4efb\u52a1",message:o,onshown:function(o){$("#downloadexJson").bind("input propertychange",function(){try{dataCustom="";var o="",t=$.parseJSON($("#downloadexJson").val());for(var e in t)o+='<div class="form-group"><label class="col-sm-3 control-label">'+e+'</label><div class="col-sm-8"><input type="text" id="'+e+'" name="'+e+'" class="form-control" value="'+t[e]+'" placeholder="\u8f93\u5165'+e+'" maxlength="200"></div></div>';$("#form-group-custom").html(o)}catch(a){$("#form-group-custom").html("")}}),$("#FormValidator").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{downloadexJson:{message:"downloadex.json\u65e0\u6548",validators:{notEmpty:{message:"downloadex.json\u4e0d\u80fd\u4e3a\u7a7a"},threshold:5,remote:{url:"downloadexJob/checkJson.action",message:"JSON\u683c\u5f0f\u65e0\u6548",delay:1e3,type:"post",data:function(o){return{json:$("#downloadexJson").val()}}}}}}})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(o){if($("#FormValidator").bootstrapValidator("validate"),$("#FormValidator").data("bootstrapValidator").isValid()){var t=$.parseJSON($("#downloadexJson").val());dataCustom="";try{for(var e in t)dataCustom+="&"+e+"="+encodeURIComponent($("#"+e).val())}catch(a){$("#form-group-custom").html("")}var l="";l="description="+encodeURIComponent($("#description").val())+"&cmdBeforeDownload="+encodeURIComponent($("#cmdBeforeDownload").val())+"&cmdBeforeUnpack="+encodeURIComponent($("#cmdBeforeUnpack").val())+"&cmdBeforeMerge="+encodeURIComponent($("#cmdBeforeMerge").val())+"&cmdSuccess="+encodeURIComponent($("#cmdSuccess").val())+"&cmdFail="+encodeURIComponent($("#cmdFail").val())+dataCustom,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"downloadexJob/addDownloadexJob.action",timeout:6e4,dataType:"json",data:l,success:function(t){var e="";e=600009==t.result?t.message:ConfigCN[t.result],6e5==t.result&&($("#table-wjxf").bootstrapTable("refresh"),o.close()),BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:e,buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})},error:function(o,t,e){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(o){o.close()}}]})}})}else BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"})}},{label:"\u5173\u95ed",action:function(o){o.close()}}]})}),$("#serach_button").click(function(){$("#table-wjxf").bootstrapTable("refresh")}),$(".datetimeStart").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,minView:"month",maxView:"decade",language:"zh-CN"});