function queryTrainDev(){var t=echarts.init(document.getElementById("echarts_sbzxtj"),"macarons");t.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var e=$("#RailwayBureau").val(),a=$("#RailwayStation").val(),o=$("#TrainShop").val(),i=$("#datetime").val(),n="trainBureauId="+e+"&trainStationId="+a+"&trainShopId="+o+"&statDate="+i;$.ajax({type:"post",url:"devFlowInfo/queryTrainDev.action",timeout:6e4,dataType:"json",data:n,success:function(t){var e=[],a=[],o=[],i="",n=0,r=0;$.each(t.devStatList,function(t,l){"\u5176\u4ed6"!=l.statName?(e.push(l.statName),a.push(l.sumInstall),o.push(l.sumOnLine)):(i=l.statName,n=l.sumInstall,r=l.sumOnLine)}),"\u5176\u4ed6"==i&&0!=n&&0!=r&&(e.push(i),a.push(n),o.push(r));var l=echarts.init(document.getElementById("echarts_sbzxtj"),"macarons");option={tooltip:{trigger:"axis"},toolbox:{feature:{restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["\u5df2\u5b89\u88c5\u6570","\u8bbe\u5907\u5728\u7ebf\u6570"],bottom:"0px"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",data:e}],yAxis:[{type:"value",name:"\u6570\u91cf",axisLabel:{formatter:"{value}"}}],series:[{name:"\u5df2\u5b89\u88c5\u6570",type:"bar",label:{normal:{show:!0,position:"top"}},data:a},{name:"\u8bbe\u5907\u5728\u7ebf\u6570",type:"bar",label:{normal:{show:!0,position:"top"}},data:o}]},l.hideLoading(),l.setOption(option)},error:function(t,e,a){"timeout"==e&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(t){t.close()}}]})}})}var date=new Date;$("#datetime").val(new Date(date).format("yyyy-MM-dd")),queryTrainDev(),$.ajax({type:"post",url:"selectObject/getRailwayBureau.action",contentType:"application/json",dataType:"json",success:function(t){$("#RailwayBureau").html('<option value="">\u9009\u62e9\u914d\u5c5e\u5c40</option>'),$.each(t,function(t,e){$("#RailwayBureau").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u5c40\u4fe1\u606f\uff01")}}),$("#RailwayBureau").change(function(){if(""!=$(this).val()){var t="";t="trainBureauId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayStation.action",dataType:"json",data:t,success:function(t){$("#RailwayStation").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(t,function(t,e){$("#RailwayStation").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u6bb5\u4fe1\u606f\uff01")}})}else $("#RailwayStation").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#RailwayStation").change(function(){if(""!=$(this).val()){var t="";t="trainBureauId="+$("#RailwayBureau").val()+"&trainStationId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayShop.action",dataType:"json",data:t,success:function(t){$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(t,function(t,e){$("#TrainShop").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u8f66\u95f4\u4fe1\u606f\uff01")}})}else $("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#serach_button").click(function(){queryTrainDev()}),$(".datetime").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,minView:"month",maxView:"decade",language:"zh-CN"}).on("click",function(t){$(".datetime").datetimepicker("setStartDate","2016-12-13")});