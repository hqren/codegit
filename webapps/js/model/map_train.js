function GetSSWZ(){var a="",e=new BMap.Map("allmap");e.centerAndZoom("\u4e2d\u56fd",5),e.enableScrollWheelZoom(),e.setMapStyle({style:"bluish"});var t=new BMap.ScaleControl({anchor:BMAP_ANCHOR_TOP_LEFT}),o=new BMap.NavigationControl,n=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_SMALL}),i=$("#MacList").val(),s=$("#Mac").val();null!=i&&(i=""),null!=i&&null!=s?i+=","+s:i=s;var l=$("#RailwayBureau").val(),c=$("#RailwayStation").val(),r=$("#TrainShop").val(),d=$("#RailwayLine").val();a="trainBureauId="+l+"&trainStationId="+c+"&trainShopId="+r+"&trainLineId="+d+"&mac="+i,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devGps/getVGpsRealtimeByMac.action",dataType:"json",data:a,success:function(a){var t=[];$.each(a,function(a,e){var o=e.lonLat.split(",");o.length>0&&(t.push(new BMap.Point(parseFloat(o[0]),parseFloat(o[1]))),t[a].devMac=e.mac,t[a].carType=e.car_type)});var o={size:BMAP_POINT_SIZE_SMALL,shape:BMAP_POINT_SHAPE_STAR,color:"#e04500"},n=new BMap.PointCollection(t,o);n.addEventListener("click",function(a){yxxx_read2(a.point.devMac)}),e.addOverlay(n)},error:function(){BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u65e0\u6cd5\u83b7\u53d6\u8fd4\u56de\u6570\u636e\uff0c\u8bf7\u5237\u65b0\u9875\u9762\uff01",buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})}}),e.addControl(t),e.addControl(o),e.addControl(n)}function GetSSWZ_DJH(){var a="",e=new BMap.Map("allmap");e.centerAndZoom("\u4e2d\u56fd",5),e.enableScrollWheelZoom(),e.setMapStyle({style:"bluish"});var t=new BMap.ScaleControl({anchor:BMAP_ANCHOR_TOP_LEFT}),o=new BMap.NavigationControl,n=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_SMALL});if(1==car_type){var i=String($("#MacList").val()),s=$("#Mac").val();null!=i&&"null"!=i||(i=""),""!=i&&""!=s?i+=","+s:""==i&&""!=s?i=s:i+=s;var l=$("#RailwayBureau").val(),c=$("#RailwayStation").val(),r=$("#TrainShop").val(),d=$("#RailwayLine").val();a="trainBureauId="+l+"&trainStationId="+c+"&trainShopId="+r+"&trainLineId="+d+"&mac="+i}else if(2==car_type){cmpId=CmpId;var p=$("#SNCar").val(),s=$("#MacCar").val(),v=$("#CbPlateNum").val();a="equSn="+p+"&cbPlateNum="+v+"&mac="+s,""!=$("#Province").val()&&(a+="&cmpId="+CmpId)}a+="&carType="+car_type,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devGps/getVGpsRealtimeByMac.action",dataType:"json",data:a,success:function(a){if(0!=a.length){var t=[],o=null;$.each(a,function(a,e){var n=e.lonLat.split(",");n.length>0&&(o=new BMap.Point(parseFloat(n[0]),parseFloat(n[1])),t.push(new BMap.Marker(o)),t[a].mac=e.mac,t[a].car_type=e.car_type,t[a].addEventListener("click",function(){yxxx_read2(this.mac)}))});new BMapLib.MarkerClusterer(e,{markers:t})}else errorNotify(null,"\u672a\u80fd\u67e5\u8be2\u5230\u8bbe\u5907\u4fe1\u606f\uff01")},error:function(){BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u65e0\u6cd5\u83b7\u53d6\u8fd4\u56de\u6570\u636e\uff0c\u8bf7\u5237\u65b0\u9875\u9762\uff01",buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})}}),e.addControl(t),e.addControl(o),e.addControl(n)}function GetMacWZ(){var a=new BMap.Map("allmap");a.centerAndZoom("\u4e2d\u56fd",5),a.enableScrollWheelZoom(),a.setMapStyle({style:"bluish"});var e=new BMap.ScaleControl({anchor:BMAP_ANCHOR_TOP_LEFT}),t=new BMap.NavigationControl,o=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_SMALL}),n=$("#MacList").val(),i=$("#Mac").val();null!=n&&(n=""),null!=n&&null!=i?n+=","+i:n=i;var s=$("#RailwayBureau").val(),l=$("#RailwayStation").val(),c=$("#TrainShop").val(),r=$("#RailwayLine").val();data="trainBureauId="+s+"&trainStationId="+l+"&trainShopId="+c+"&trainLineId="+r+"&mac="+n,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devGps/getVGpsRealtimeByMac.action",dataType:"json",data:data,success:function(e){$.each(e,function(e,t){var o=t.lonLat.split(",");if(o.length>0){var n=new BMap.Marker(new BMap.Point(parseFloat(o[0]),parseFloat(o[1])));a.addOverlay(n),n.setAnimation(BMAP_ANIMATION_BOUNCE),n.addEventListener("click",function(){yxxx_read2(GetMac)})}})},error:function(){BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u65e0\u6cd5\u83b7\u53d6\u8fd4\u56de\u6570\u636e\uff0c\u8bf7\u5237\u65b0\u9875\u9762\uff01",buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})}}),a.addControl(e),a.addControl(t),a.addControl(o)}function openChart(a,e){layer.open({shadeClose:!0,title:"\u8be6\u60c5",type:2,area:["1250px","600px"],fix:!1,maxmin:!0,content:"plot.html?carType="+a+"&devMac="+e})}function overlay_style(a){var e=a.target;e instanceof BMap.Marker?alert("\u8be5\u8986\u76d6\u7269\u662f\u70b9\uff0c\u70b9\u7684\u5750\u6807\u662f\uff1a"+e.getPosition().lng+","+e.getPosition().lat):alert("\u65e0\u6cd5\u83b7\u77e5\u8be5\u8986\u76d6\u7269\u7c7b\u578b")}function yxxx_read2(a){TempDevMac=a;var e="";e="devMac="+a,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devRealtimeInfo/getDevIpmac.action",dataType:"json",data:e,success:function(a){var e="";e+='<table id="table-yxxx_read2">',e+="<thead><tr><th>\u5e8f\u53f7</th><th>devMac</th><th>\u7b2c\u4e00\u6b21\u8bb0\u5f55\u65f6\u95f4</th><th>\u6700\u540e\u4e00\u6b21\u8bb0\u5f55\u65f6\u95f4</th><th>\u7528\u6237 mac</th><th>\u7528\u6237\u624b\u673a\u53f7</th></tr></thead>",e+="<tbody>",$.each(a.rows,function(a,t){e+="<tr><td>"+(a+1)+"</td><td>"+t.devMac+"</td><td>"+t.firstRecTime+"</td><td>"+t.lastRecTime+"</td><td>"+t.mac+"</td><td>"+t.phone+"</td></tr>"}),e+="</tbody>",e+="</table>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u8fde\u63a5\u7528\u6237\u67e5\u770b",message:e,onshown:function(a){$("#table-yxxx_read2").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff01")}})}function yxxx_read_wifi(a){$(".loading").show();var e="";e="devMac="+a+"&carType="+car_type,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devIpMac/getTrainOrBusDeviceInstallDetail.action",dataType:"json",data:e,success:function(e){$(".loading").hide();var t="";1==car_type?(t+='<div class="row"><div class="col-sm-12"><div id="FormValidator"  class="form-horizontal">',t+='<div class="form-group"><div class="col-sm-3">\u8bbe\u5907SN\uff1a'+e.devMac+'</div><div class="col-sm-3">Portal\u7248\u672c\uff1a<span id="contentVerison"><i class="fa fa-spinner fa-spin"></i></span></div><div class="col-sm-3">\u8bbe\u5907\u5382\u5546\uff1a'+e.equBrand+'</div><div class="col-sm-3">\u7ebf\u8def\uff1a'+e.cbPathStart+"——"+e.cbPathEnd+"("+e.lineName+")</div></div>",t+='<div class="form-group"><div class="col-sm-6">\u6240\u5728\u8def\u5c40\uff1a'+e.bureauName+'</div><div class="col-sm-6">\u5f53\u65e5\u8bbe\u5907\u5728\u7ebf\u65f6\u957f\uff1a<span id="devOnline"><i class="fa fa-spinner fa-spin"></i></span></div></div>',t+='<div class="form-group"><div class="col-sm-6">\u5f53\u65e5\u7528\u6237\u7d2f\u8ba1\u5728\u7ebf\u65f6\u957f\uff1a<span id="totalConnectTime"><i class="fa fa-spinner fa-spin"></i></span></div><div class="col-sm-6">\u5f53\u65e5\u7528\u6237\u5e73\u5747\u5728\u7ebf\u65f6\u957f\uff1a<span id="avgConnectUserTime"><i class="fa fa-spinner fa-spin"></i></span></div></div>',t+="</div></div></div>"):2==car_type&&(t+='<div class="row"><div class="col-sm-12"><div id="FormValidator"  class="form-horizontal">',t+='<div class="form-group"><div class="col-sm-3">\u8bbe\u5907MAC\uff1a'+e.devMac+'</div><div class="col-sm-3">Portal\u7248\u672c\uff1a<span id="contentVerison"><i class="fa fa-spinner fa-spin"></i></span></div><div class="col-sm-3">\u8bbe\u5907\u5382\u5546\uff1a'+e.equBrand+'</div><div class="col-sm-3">\u8f66\u724c\uff1a'+e.cbPlateNum+"</div></div>",t+='<div class="form-group"><div class="col-sm-3">\u8f66\u8f86\u54c1\u724c\uff1a'+e.cbBrand+'</div><div class="col-sm-3">\u8f66\u8f86\u7c7b\u578b\uff1a'+e.cbTypeStr+'</div><div class="col-sm-3">\u7ebf\u8def\uff1a'+e.cbPathStart+"——"+e.cbPathEnd+"</div></div>",t+='<div class="form-group"><div class="col-sm-6">\u6240\u5728\u8fd0\u4f01\uff1a'+e.cbOrgName+'</div><div class="col-sm-6">\u5f53\u65e5\u8bbe\u5907\u5728\u7ebf\u65f6\u957f\uff1a<span id="devOnline"><i class="fa fa-spinner fa-spin"></i></span></div></div>',t+='<div class="form-group"><div class="col-sm-6">\u5f53\u65e5\u7528\u6237\u7d2f\u8ba1\u5728\u7ebf\u65f6\u957f\uff1a<span id="totalConnectTime"><i class="fa fa-spinner fa-spin"></i></span></div><div class="col-sm-6">\u5f53\u65e5\u7528\u6237\u5e73\u5747\u5728\u7ebf\u65f6\u957f\uff1a<span id="avgConnectUserTime"><i class="fa fa-spinner fa-spin"></i></span></div></div>',t+="</div></div></div>"),t+='<br><div class="row"><div class="col-sm-12">',t+='<div class="TempColSm1 col-sm-1"></div><div class="col-sm-4"><div id="echarts_UserFW" style="width: 100%;height:400px;"></div></div><div class="TempColSm1 col-sm-1"></div>',t+='<div id="Top10" style="display:none;"><div id="echarts_Mobile" style="width: 100%;height:400px;"></div></div><div id="col_br" class="col-sm-12" style="display:none;"><br></div>',t+='<div class="TempColSm1 col-sm-1"></div><div class="col-sm-4"><div id="echarts_lwt" style="width: 100%;height:220px;"></div><div id="echarts_ll" style="width: 100%;height:220px;"></div><div class="text-center">\u8bbe\u5907\u6d41\u91cf\u603b\u6d88\u8017\uff1a<span id="totalFlow"><i class="fa fa-spinner fa-spin"></i></span></div></div>',t+='<div id="echartsData" class="col-sm-8" style="display:none;"><div id="echarts_data" style="width: 100%;height:400px;"></div></div>',t+="</div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u8be6\u60c5",message:t,cssClass:"FullScreen-dialog",onshown:function(e){function t(){if(getDevTodayConnectTraUserNum&&getDevHitUserNumInfo&&getDevAccessInfo&&getDevTodayConnectUserNum){var e=new Array,t=0,l="";clearInterval(s),$.each(o,function(a,o){$.each(n,function(a,e){o==e.name&&(l=e.name,t=e.value)}),e.push({value:t,name:o}),t=0,l=""}),option_UserFW={title:{text:"\u7528\u6237\u8bbf\u95ee",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}"},calculable:!0,series:[{name:"\u7528\u6237\u8bbf\u95ee",type:"funnel",label:{normal:{show:!0,formatter:"{b} :\n{c}",position:"top"}},data:e}]},i.hideLoading(),i.setOption(option_UserFW),i.on("click",function(e){Top10(a)})}}getDevTodayConnectTraUserNum=!1,getDevHitUserNumInfo=!1,getDevAccessInfo=!1,getDevTodayConnectUserNum=!1;var o=["\u8fde\u63a5\u7528\u6237\u6570","\u81ea\u5f39\u9875\u7528\u6237","\u8fdb\u5165\u9996\u9875\u7528\u6237","\u9a8c\u8bc1\u7801\u8bf7\u6c42\u7528\u6237","\u9a8c\u8bc1\u7801\u6210\u529f\u7528\u6237","\u4ea7\u751f\u6d41\u91cf\u7528\u6237"],n=new Array,i=echarts.init(document.getElementById("echarts_UserFW"),"macarons");i.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var s=setInterval(t,1e3),l="";l="devMac="+a,$.ajax({type:"post",url:"devRealtimeInfo/getDevRealtimeInfoDetail.action",data:l,dataType:"json",success:function(a){$("#contentVerison").html(a.contentVerison)}});var l="";l="devMacs="+a,$.ajax({type:"post",url:"devIpMac/selectTracfficByMacToday.action",data:l,dataType:"json",success:function(a){$("#devOnline").html(timemat(a.devOnline))}});var c=echarts.init(document.getElementById("echarts_ll"),"macarons");c.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var l="";l="devMac="+a,$.ajax({type:"post",url:"devIpMac/selectDeviceConnectInfo.action",data:l,dataType:"json",success:function(a){var e=0,t=0;null!=a?($("#totalConnectTime").html(timemat(a.totalConnectTime)),$("#avgConnectUserTime").html(timemat(a.avgConnectUserTime)),hostList=a.hostList,e=BToMb(a.userFlow).replace("MB",""),t=BToMb(a.serverFlow).replace("MB",""),$("#totalFlow").html(parseFloat(parseFloat(e)+parseFloat(t)).toFixed(2)+" MB")):($("#totalConnectTime").html("-"),$("#avgConnectUserTime").html("-"),$("#totalFlow").html("0 MB"));var o={title:{text:"\u6d41\u91cf\u6d88\u8017\u56fe",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"\u6d41\u91cf\u6d88\u8017",type:"pie",radius:["30%","50%"],data:[{value:e,name:"\u7528\u6237\u7aef"},{value:t,name:"\u670d\u52a1\u7aef"}]}]};c.hideLoading(),c.setOption(o)}});var l="";l="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevTodayConnectUserNum.action",data:l,dataType:"json",success:function(a){n.push({value:a,name:o[0]}),getDevTodayConnectUserNum=!0}});var l="";l="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevTodayConnectTraUserNum.action",data:l,dataType:"json",success:function(a){n.push({value:a,name:o[5]}),getDevTodayConnectTraUserNum=!0}});var l="";l="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevHitUserNumInfo.action",data:l,dataType:"json",success:function(a){$.each(a,function(a,e){switch(e.hitID){case"\u81ea\u5f39\u9875":n.push({value:e.counts,name:o[1]});break;case"\u83b7\u53d6\u9a8c\u8bc1\u7801\u70b9\u51fb":n.push({value:e.counts,name:o[3]});break;case"\u8ba4\u8bc1\u6210\u529f":n.push({value:e.counts,name:o[4]})}}),getDevHitUserNumInfo=!0}});var r=echarts.init(document.getElementById("echarts_lwt"),"macarons");r.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var l="";l="devMac="+a,$.ajax({type:"post",url:"devIpMac/getDevAccessInfo.action",data:l,dataType:"json",success:function(e){n.push({value:e.homePageCount,name:o[2]}),getDevAccessInfo=!0;var t={title:{text:"\u8fde\u7f51\u56fe",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}"},series:[{name:"\u8fde\u7f51\u56fe",type:"pie",radius:"45%",data:[{value:parseInt(e.insideCount),name:"\u5185\u7f51\u8bbf\u95ee\u4eba\u6570",label:{normal:{show:!0,formatter:"{b} :\n{c}",position:"top"}}},{value:parseInt(e.outsideCount),name:"\u5916\u7f51\u8bbf\u95ee\u4eba\u6570",label:{normal:{show:!0,formatter:"{b} :\n{c}",position:"top"}}}]}]};r.hideLoading(),r.setOption(t),r.on("click",function(e){"\u5185\u7f51\u8bbf\u95ee\u4eba\u6570"==e.name?NeiWang(a):"\u5916\u7f51\u8bbf\u95ee\u4eba\u6570"==e.name&&WaiWang(a)})}})},buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})},error:function(){$(".loading").hide(),errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u8fde\u63a5\u4fe1\u606f\uff01")}})}function Top10(a){$("#defaultCol").removeClass("col-sm-6").addClass("col-sm-4"),$("#col_br").show(),$(".TempColSm1").remove(),$("#Top10").addClass("col-sm-8").show();var e=echarts.init(document.getElementById("echarts_Mobile"),"macarons");e.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var t="";t="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevTodayConnectUser.action",data:t,dataType:"json",success:function(a){var t=[],o=[];$.each(a,function(a,e){t.push(a),o.push({name:a,type:"bar",data:[parseInt(e)],label:{normal:{show:!0,position:"top"}}})}),t=t.slice(0,10),o=o.slice(0,10),option={title:{text:"\u624b\u673a\u54c1\u724c\u8bbf\u95eeTOP10",x:"center"},tooltip:{trigger:"axis"},toolbox:{feature:{restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:t,bottom:"0px"},xAxis:[{type:"category",boundaryGap:!1,name:"\u624b\u673a\u54c1\u724c",data:[""]}],yAxis:[{type:"value",name:"\u4eba\u6570",axisLabel:{formatter:"{value}"}}],series:o},e.hideLoading(),e.setOption(option)}})}function NeiWang(a){$("#defaultCol").removeClass("col-sm-6").addClass("col-sm-4"),$("#col_br").show(),$(".TempColSm1").remove(),$("#echartsData").show();var e=echarts.init(document.getElementById("echarts_data"),"macarons");e.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var t="";t="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevHitInfo.action",data:t,dataType:"json",success:function(a){var t=[],o=[];$.each(a,function(a,e){t.push(e.hitID),o.push({name:e.hitID,type:"bar",data:[parseInt(e.counts)],label:{normal:{show:!0,position:"top"}}})}),t=t.slice(0,10),o=o.slice(0,10),option={title:{text:"\u5185\u7f51\u9891\u9053\u8bbf\u95ee\u6b21\u6570",x:"center"},tooltip:{trigger:"axis"},toolbox:{feature:{restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:t,bottom:"0px"},xAxis:[{type:"category",boundaryGap:!1,name:"\u9891\u9053",data:[""]}],yAxis:[{type:"value",name:"\u8bbf\u95ee\u4eba\u6570",axisLabel:{formatter:"{value}"}}],series:o},e.hideLoading(),e.setOption(option)}})}function WaiWang(a){$("#defaultCol").removeClass("col-sm-6").addClass("col-sm-4"),$("#col_br").show(),$(".TempColSm1").remove(),$("#echartsData").show();var e=echarts.init(document.getElementById("echarts_data"),"macarons");e.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var t=hostList.split("|"),o=[],n=[];$.each(t,function(a,e){e=e.split(","),o.push(e[0]),n.push({name:e[0],type:"bar",data:[parseInt(e[1])],label:{normal:{show:!0,position:"top"}}})}),o=o.slice(0,10),n=n.slice(0,10),option={title:{text:"TOP10\u5916\u7f51\u5730\u5740\u8bbf\u95ee\u6b21\u6570",x:"center"},tooltip:{trigger:"axis"},toolbox:{feature:{restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:o,bottom:"0px"},xAxis:[{type:"category",boundaryGap:!1,name:"\u9891\u9053",data:[""]}],yAxis:[{type:"value",name:"\u8bbf\u95ee\u4eba\u6570",axisLabel:{formatter:"{value}"}}],series:n},e.hideLoading(),e.setOption(option)}var GetMac=getUrlParam("GetMac"),carType=getUrlParam("carType"),CmpId="",CmpName="",hostList="",getDevTodayConnectTraUserNum,getDevHitUserNumInfo,getDevAccessInfo,getDevTodayConnectUserNum;if(2==car_type?($("#train_control").hide(),$("#car_control").show(),getProvince()):($.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayBureau.action",dataType:"json",success:function(a){$.each(a,function(a,e){$("#RailwayBureau").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u5c40\u4fe1\u606f\uff01")}}),getRailwayLine("","",""),$("#RailwayBureau").change(function(){if(getRailwayLine($(this).val(),"",""),""!=$(this).val()){var a="";a="trainBureauId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayStation.action",dataType:"json",data:a,success:function(a){$("#RailwayStation").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$("#MacList").html(""),$.each(a,function(a,e){$("#RailwayStation").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u6bb5\u4fe1\u606f\uff01")}})}else $("#RailwayStation").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$("#MacList").html(""),$(".selectpicker").selectpicker("refresh")}),$("#RailwayStation").change(function(){if(getRailwayLine($("#RailwayBureau").val(),$(this).val(),""),""!=$(this).val()){var a="";a="trainBureauId="+$("#RailwayBureau").val()+"&trainStationId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayShop.action",dataType:"json",data:a,success:function(a){$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$("#MacList").html(""),$.each(a,function(a,e){$("#TrainShop").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u8f66\u95f4\u4fe1\u606f\uff01")}})}else $("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$("#MacList").html(""),$(".selectpicker").selectpicker("refresh")}),$("#TrainShop").change(function(){getRailwayLine($("#RailwayBureau").val(),$("#RailwayStation").val(),$(this).val()),$("#MacList").html("")}),$("#RailwayLine").change(function(){if(""!=$(this).val()){var a="";a="trainBureauId="+$("#RailwayBureau").val()+"&trainStationId="+$("#RailwayStation").val()+"&trainShopId="+$("#TrainShop").val()+"&trainLineId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayMacList.action",dataType:"json",data:a,success:function(a){$("#MacList").html(""),$.each(a,function(a,e){$("#MacList").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6MAC\u4fe1\u606f\uff01")}})}else $("#MacList").html(""),$(".selectpicker").selectpicker("refresh")}),$("#train_control").show(),$("#car_control").hide()),$("#serach_sswz").click(function(){GetMac=null,GetSSWZ()}),$("#serach_sswz_djh").click(function(){GetMac=null,GetSSWZ_DJH()}),$("#serach_sswz_djh_car").click(function(){""!=$("#Province").val()&&""!=$("#CmpByProvince").val()?CmpName==$("#CmpByProvince").val()?GetSSWZ_DJH():errorNotify(null,"\u8fd0\u4f01\u4fe1\u606f\u9519\u8bef\uff01"):""!=$("#Province").val()&&""==$("#CmpByProvince").val()?errorNotify(null,"\u8bf7\u8f93\u5165\u8fd0\u4f01\u4fe1\u606f\uff01"):GetSSWZ_DJH()}),null!=GetMac)$("#Mac").val(GetMac),GetMacWZ();else{var map=new BMap.Map("allmap");map.centerAndZoom("\u4e2d\u56fd",5),map.enableScrollWheelZoom(),map.setMapStyle({style:"bluish"});var top_left_control=new BMap.ScaleControl({anchor:BMAP_ANCHOR_TOP_LEFT}),top_left_navigation=new BMap.NavigationControl,top_right_navigation=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_SMALL});map.addControl(top_left_control),map.addControl(top_left_navigation),map.addControl(top_right_navigation)}$(".datetimeStart").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,minView:"month",maxView:"decade",language:"zh-CN"}).on("click",function(a){$(".datetimeStart").datetimepicker("setEndDate",$("#datetimeEnd").val())}),$(".datetimeEnd").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,minView:"month",maxView:"decade",language:"zh-CN"}).on("click",function(a){$(".datetimeEnd").datetimepicker("setStartDate",$("#datetimeStart").val())});var TempDevMac,sourceArray=new Array;$("#Province").change(function(){if($("#CmpByProvince").val(""),sourceArray=new Array,""!=$("#Province").val()){var a="";a="provinceId="+$("#Province").val(),$.ajax({type:"post",url:"devGps/getCmpByProvince.action",data:a,dataType:"json",success:function(a){$.each(a,function(a,e){sourceArray.push({id:e.cmpId,name:e.cmpName})})},error:function(a,e,t){"timeout"==e&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})}})}}),$("#CmpByProvince").typeahead({source:function(a,e){return e(sourceArray)},updater:function(a){return CmpId=a.id,CmpName=a.name,a}});