var $table=$("#table-bbsj");$table.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:APIUrl+"getAllVersionResults.action",dataType:"json",striped:!0,toolbar:"#toolbar",uniqueId:"devClientVersionRusultId",pagination:!0,singleSelect:!1,sortable:!1,sidePagination:"server",columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(e,t,o){return o+1}},{title:"\u6267\u884c\u8bbe\u5907",field:"mac",align:"center"},{title:"\u8bbe\u5907\u4e0a\u62a5\u7248\u672c\u53f7",field:"version",align:"center",valign:"middle"},{title:"\u4e0b\u53d1\u72b6\u6001",field:"need_set_config",align:"center",valign:"middle",formatter:function(e,t,o){return 0==t.needSetConfig?"\u5f85\u4e0b\u53d1":1==t.needSetConfig?"\u5df2\u4e0b\u53d1":2==t.needSetConfig?"\u6682\u505c":"-"}},{title:"\u5347\u7ea7\u7ed3\u679c",field:"result",align:"center",valign:"middle",formatter:function(e,t,o){return 0==t.need_set_config?"-":null==t.result?"-":1==t.result?"\u6210\u529f":"\u5931\u8d25"}},{title:"\u66f4\u65b0\u65f6\u95f4",field:"updateTimeStr",align:"center",valign:"middle",formatter:function(e,t,o){return new Date(e.replace(/-/g,"/")).format("yyyy-MM-dd HH:mm:ss")}}]}),$("#sb_add").click(function(){var e="";$.ajax({method:"post",contentType:"application/x-www-form-urlencoded",url:APIUrl+"getAllVersionsCombo.action",contentType:"application/json",dataType:"json",success:function(t){$.each(t,function(t,o){e+='<option value="'+o.devClientVersionId+'">'+o.version+"</option>"});var o="";o+='<div class="row"><div class="col-sm-12"><form id="FormValidator" class="form-horizontal">',o+='<br><div class="form-group"><label class="col-sm-3 control-label">\u7248\u672c\u53f7</label><div class="col-sm-6"><select id="sb_add_devClietntVersionId" class="form-control">'+e+"</select></div></div>",o+='<div class="form-group"><label class="col-sm-3 control-label">\u8bbe\u5907</label><div class="col-sm-8"><textarea id="sb_add_macs" name="sb_add_macs" class="form-control" rows="10"></textarea></div></div>',o+="</form></div></div>",BootstrapDialog.show({title:"\u6dfb\u52a0\u8bbe\u5907",message:o,onshown:function(e){$("#FormValidator").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{sb_add_macs:{message:"\u8bbe\u5907\u65e0\u6548",validators:{notEmpty:{message:"\u8bbe\u5907\u4e0d\u80fd\u4e3a\u7a7a"}}}}})},buttons:[{label:"\u63d0\u4ea4",cssClass:"btn-primary",action:function(e){if($("#FormValidator").bootstrapValidator("validate"),$("#FormValidator").data("bootstrapValidator").isValid()){strdevClietntVersionId=$("#sb_add_devClietntVersionId").val(),strmacs=$("#sb_add_macs").val(),data="devClientVersionID="+strdevClietntVersionId+"&macs="+strmacs,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:APIUrl+"saveDevVersionResult.action",timeout:6e4,dataType:"json",data:data,success:function(t){$("#table-bbsj").bootstrapTable("refresh",{url:APIUrl+"getAllVersionResults.action"}),t.success&&e.close(),BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:t.msg,buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})},error:function(e,t,o){"timeout"==t&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})}else BootstrapDialog.alert({title:"\u9a8c\u8bc1\u5931\u8d25",message:"\u8bf7\u786e\u8ba4\u8f93\u5165\u5185\u5bb9\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff01",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"\u786e\u8ba4"})}},{label:"\u91cd\u7f6e",action:function(e){$("#FormValidator").data("bootstrapValidator").resetForm(!0)}},{label:"\u5173\u95ed",action:function(e){e.close()}}]})}})});