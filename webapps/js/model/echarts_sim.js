function querySimStatus(data){var RailwayBureau=$("#RailwayBureau").val(),Operator=$("#Operator").val(),NothingTraffic=$("#NothingTraffic").val(),SelectType=0,echart_title_1,echart_title_2,echart_title_3,echart_title_4,echart_title_5,echart_title_6,TitleArrayTab1=new Array;TitleArrayTab1=["\u8def\u5c40","\u8fd0\u8425\u5546","\u6d41\u91cf\u5361","\u8fd0\u8425\u5546\u6d41\u91cf","\u8fd0\u8425\u5546","\u6709\u65e0\u6d41\u91cf\u5361"],""!=RailwayBureau&&""==Operator&&""==NothingTraffic?(SelectType=1,TitleArrayTab1[1]=$("#RailwayBureau").find("option:selected").text(),TitleArrayTab1[3]=$("#RailwayBureau").find("option:selected").text()):""==RailwayBureau&&""!=Operator&&""==NothingTraffic?(SelectType=2,TitleArrayTab1[0]=$("#Operator").find("option:selected").text(),TitleArrayTab1[4]=$("#Operator").find("option:selected").text()):""==RailwayBureau&&""==Operator&&""!=NothingTraffic?(SelectType=3,TitleArrayTab1[0]=$("#NothingTraffic").find("option:selected").text(),TitleArrayTab1[5]=$("#NothingTraffic").find("option:selected").text()):""!=RailwayBureau&&""!=Operator&&""==NothingTraffic?SelectType=4:""!=RailwayBureau&&""==Operator&&""!=NothingTraffic?(SelectType=5,TitleArrayTab1[1]=$("#RailwayBureau").find("option:selected").text()):""==RailwayBureau&&""!=Operator&&""!=NothingTraffic?(SelectType=6,TitleArrayTab1[0]=$("#Operator").find("option:selected").text()):""!=RailwayBureau&&""!=Operator&&""!=NothingTraffic&&(SelectType=4),$.ajax({type:"post",url:"simStatistics/querySimStatus.action",timeout:6e4,dataType:"json",data:data,success:function(jsonResult){var trainBureauNameArray=new Array,trainBureauIdArray=new Array,trainBureauIdCountArray=new Array,operatorNameArray=new Array,operatorArray=new Array,operatorCountArray=new Array,nothingTrafficNameArray=new Array,nothingTrafficArray=new Array,nothingTrafficCountArray=new Array,operatorTrafficArray_1_0=new Array,operatorTrafficArray_1_1=new Array,operatorTrafficArray_2_0=new Array,operatorTrafficArray_2_1=new Array,operatorTrafficArray_3_0=new Array,operatorTrafficArray_3_1=new Array,trainBureauIdTrafficArray_0=new Array,trainBureauIdTrafficArray_1=new Array;if($.each(jsonResult,function(t,a){-1==trainBureauNameArray.indexOf(a.bureauName)&&(trainBureauNameArray.push(a.bureauName),trainBureauIdArray.push(a.trainBureauId)),-1==operatorArray.indexOf(a.operator)&&(operatorNameArray.push(operatorCN(a.operator)),operatorArray.push(a.operator)),-1==nothingTrafficArray.indexOf(a.nothingTraffic)&&(nothingTrafficNameArray.push(nothingTrafficCN(a.nothingTraffic)),nothingTrafficArray.push(a.nothingTraffic))}),$("#echarts_4,#echarts_5,#echarts_6").hide(),0==SelectType?$("#echarts_1,#echarts_2,#echarts_3").show():0==SelectType||2==SelectType||3==SelectType||6==SelectType?($("#echarts_1").show(),$("#echarts_2,#echarts_3").hide(),2==SelectType?$("#echarts_5").show():3==SelectType&&$("#echarts_6").show()):0==SelectType||1==SelectType||5==SelectType?($("#echarts_2").show(),$("#echarts_1,#echarts_3").hide(),1==SelectType&&$("#echarts_4").show()):0!=SelectType&&4!=SelectType||($("#echarts_3").show(),$("#echarts_1,#echarts_2").hide()),1!=SelectType&&3!=SelectType||$.each(operatorArray,function(i,item){var TempSimCountTraffic_0=0,TempSimCountTraffic_1=0;$.each(jsonResult,function(t,a){a.operator==item&&0==a.nothingTraffic?TempSimCountTraffic_0+=a.simCount:a.operator==item&&1==a.nothingTraffic&&(TempSimCountTraffic_1+=a.simCount)}),eval("operatorTrafficArray_"+item+"_0").push(TempSimCountTraffic_0),eval("operatorTrafficArray_"+item+"_1").push(TempSimCountTraffic_1)}),0==SelectType||2==SelectType||3==SelectType||6==SelectType){var strHtml="";strHtml+='<table id="SIM_LJ">',strHtml+="<thead><tr><th>\u8def\u5c40</th><th>\u5f20\u6570</th></thead>",strHtml+="<tbody>",$.each(trainBureauIdArray,function(t,a){var e=new Object,r=0,o=0,i=0;$.each(jsonResult,function(t,e){e.trainBureauId==a&&(r+=e.simCount),e.trainBureauId==a&&2==SelectType&&0==e.nothingTraffic?o+=e.simCount:e.trainBureauId==a&&2==SelectType&&1==e.nothingTraffic&&(i+=e.simCount)}),e.name=trainBureauNameArray[t],e.value=r,strHtml+="<tr><td>"+trainBureauNameArray[t]+"</td><td>"+r+"</td>",trainBureauIdCountArray.push(e),2==SelectType&&(trainBureauIdTrafficArray_0.push(o),trainBureauIdTrafficArray_1.push(i))}),strHtml+="</tbody>",strHtml+="</table>",$("#table-sim_lj").html(strHtml)}if(0==SelectType||1==SelectType||5==SelectType){var strHtml="";strHtml+='<table id="SIM_YYS">',strHtml+="<thead><tr><th>\u8fd0\u8425\u5546</th><th>\u5f20\u6570</th></thead>",strHtml+="<tbody>",$.each(operatorArray,function(t,a){var e=new Object,r=0;$.each(jsonResult,function(t,e){e.operator==a&&(r+=e.simCount)}),e.name=operatorCN(operatorArray[t]),e.value=r,strHtml+="<tr><td>"+operatorNameArray[t]+"</td><td>"+r+"</td>",operatorCountArray.push(e)}),strHtml+="</tbody>",strHtml+="</table>",$("#table-sim_yys").html(strHtml)}if(0==SelectType||4==SelectType){var strHtml="";strHtml+='<table id="SIM_LL">',strHtml+="<thead><tr><th>\u6709/\u65e0\u6d41\u91cf\u5361</th><th>\u5f20\u6570</th></thead>",strHtml+="<tbody>",$.each(nothingTrafficArray,function(t,a){var e=new Object,r=0;$.each(jsonResult,function(t,e){e.nothingTraffic==a&&(r+=e.simCount)}),e.name=nothingTrafficCN(nothingTrafficArray[t]),e.value=r,strHtml+="<tr><td>"+nothingTrafficCN(nothingTrafficArray[t])+"</td><td>"+r+"</td>",nothingTrafficCountArray.push(e)}),strHtml+="</tbody>",strHtml+="</table>",$("#table-sim_ll").html(strHtml)}$("#SIM_LJ,#SIM_YYS,#SIM_LL").bootstrapTable({pagination:!1,sidePagination:"client",columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"}]});var myChart=echarts.init(document.getElementById("echarts_sim_lj"),"macarons");option={title:{text:TitleArrayTab1[0],x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:trainBureauNameArray},series:[{name:"\u8def\u5c40",type:"pie",radius:"60%",center:["50%","60%"],data:trainBureauIdCountArray,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,formatter:"{b} : {c} ({d}%)"},labelLine:{show:!0}}}}]},myChart.setOption(option);var myChart=echarts.init(document.getElementById("echarts_sim_yys"),"macarons");option={title:{text:TitleArrayTab1[1],x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:operatorNameArray},series:[{name:"\u8fd0\u8425\u5546",type:"pie",radius:"60%",center:["50%","60%"],data:operatorCountArray,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,formatter:"{b} : {c} ({d}%)"},labelLine:{show:!0}}}}]},myChart.setOption(option);var myChart=echarts.init(document.getElementById("echarts_sim_ll"),"macarons");option={title:{text:TitleArrayTab1[2],x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:nothingTrafficNameArray},series:[{name:"\u6d41\u91cf\u5361",type:"pie",radius:"60%",center:["50%","60%"],data:nothingTrafficCountArray,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,formatter:"{b} : {c} ({d}%)"},labelLine:{show:!0}}}}]},myChart.setOption(option);var myChart=echarts.init(document.getElementById("echarts_sim_ll_yys"),"macarons");option={title:{text:TitleArrayTab1[3]},tooltip:{trigger:"axis"},legend:{data:["\u6709\u6d41\u91cf","\u65e0\u6d41\u91cf"]},toolbox:{show:!0,feature:{mark:{show:!1},dataView:{show:!1,readOnly:!1},magicType:{show:!1,type:["line","bar"]},restore:{show:!1},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!0,data:operatorNameArray}],yAxis:[{type:"value"}],series:[{name:"\u6709\u6d41\u91cf",type:"bar",label:{normal:{show:!0,position:"top"}},data:[operatorTrafficArray_1_1[0],operatorTrafficArray_2_1[0],operatorTrafficArray_3_1[0]]},{name:"\u65e0\u6d41\u91cf",type:"bar",label:{normal:{show:!0,position:"top"}},data:[operatorTrafficArray_1_0[0],operatorTrafficArray_2_0[0],operatorTrafficArray_3_0[0]]}]},myChart.setOption(option);var myChart=echarts.init(document.getElementById("echarts_sim_ll_lj"),"macarons");if(option={title:{text:TitleArrayTab1[4]},tooltip:{trigger:"axis"},legend:{data:["\u6709\u6d41\u91cf","\u65e0\u6d41\u91cf"]},toolbox:{show:!0,feature:{mark:{show:!1},dataView:{show:!1,readOnly:!1},magicType:{show:!1,type:["line","bar"]},restore:{show:!1},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!0,data:trainBureauNameArray}],yAxis:[{type:"value"}],series:[{name:"\u6709\u6d41\u91cf",type:"bar",label:{normal:{show:!0,position:"top"}},data:trainBureauIdTrafficArray_1},{name:"\u65e0\u6d41\u91cf",type:"bar",label:{normal:{show:!0,position:"top"}},data:trainBureauIdTrafficArray_0}]},myChart.setOption(option),""!=NothingTraffic){var myChart=echarts.init(document.getElementById("echarts_sim_yys_lj"),"macarons");option={title:{text:TitleArrayTab1[5]},tooltip:{trigger:"axis"},legend:{data:operatorNameArray},toolbox:{show:!0,feature:{mark:{show:!1},dataView:{show:!1,readOnly:!1},magicType:{show:!1,type:["line","bar"]},restore:{show:!1},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!0,data:trainBureauNameArray}],yAxis:[{type:"value"}],series:[{name:"\u4e2d\u56fd\u79fb\u52a8",type:"bar",label:{normal:{show:!0,position:"top"}},data:eval("operatorTrafficArray_1_"+NothingTraffic)},{name:"\u4e2d\u56fd\u8054\u901a",type:"bar",label:{normal:{show:!0,position:"top"}},data:eval("operatorTrafficArray_2_"+NothingTraffic)},{name:"\u4e2d\u56fd\u7535\u4fe1",type:"bar",label:{normal:{show:!0,position:"top"}},data:eval("operatorTrafficArray_3_"+NothingTraffic)}]},myChart.setOption(option)}},error:function(t,a,e){"timeout"==a&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(t){t.close()}}]})}})}function queryTrainTracfficScale(t){$.ajax({type:"post",url:"simStatistics/queryTrainTracfficScale.action",timeout:6e4,dataType:"json",data:t,success:function(t){var a=new Array,e=new Array;$.each(t,function(t,r){if(-1==a.indexOf(r.bureauName)){a.push(r.bureauName);var o=new Object;o.name=a[t],o.value=KToGb(r.traffic).replace(" GB",""),e.push(o)}});var r=echarts.init(document.getElementById("echarts_sim_ll_month"),"macarons");option={title:{text:TempMonth+"\u6708\u4efd\u914d\u5c5e\u5c40\u6d41\u91cf\u6bd4\u4f8b",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{show:!1,orient:"vertical",left:"left",data:a},series:[{name:"\u914d\u5c5e\u5c40\u6d41\u91cf\u6bd4\u4f8b",type:"pie",radius:"60%",center:["50%","60%"],data:e,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{label:{show:!0,formatter:"{b} : {c} ({d}%)"},labelLine:{show:!0}}}}]},r.setOption(option)},error:function(t,a,e){"timeout"==a&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(t){t.close()}}]})}})}function queryNewlyAddedSim(t){$.ajax({type:"post",url:"simStatistics/queryNewlyAddedSim.action",timeout:6e4,dataType:"json",data:t,success:function(t){var a=new Array,e=new Array,r=new Array;$.each(t,function(t,o){-1==a.indexOf(o.week)&&(a.push(o.week),e.push(o.traffic),r.push(o.simCount))});var o=echarts.init(document.getElementById("echarts_sim_add_month"),"macarons");option={title:{text:TempMonth+"\u6708\u4efd\u5bf9\u6bd4"},tooltip:{trigger:"axis"},legend:{data:["SIM\u5361\u6570\u91cf","\u4f7f\u7528\u6d41\u91cf(G)"]},toolbox:{show:!0,feature:{mark:{show:!1},dataView:{show:!1,readOnly:!1},magicType:{show:!1,type:["line","bar"]},restore:{show:!1},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!0,data:a}],yAxis:[{type:"value"}],series:[{name:"SIM\u5361\u6570\u91cf",type:"bar",label:{normal:{show:!0,position:"top"}},data:r},{name:"\u4f7f\u7528\u6d41\u91cf(G)",type:"bar",label:{normal:{show:!0,position:"top"}},data:e}]},o.setOption(option),console.log(a)},error:function(t,a,e){"timeout"==a&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(t){t.close()}}]})}})}function queryAverageTracffic(t){$.ajax({type:"post",url:"simStatistics/queryAverageTracffic.action",timeout:6e4,dataType:"json",data:t,success:function(t){var a=new Array,e=new Array,r=new Array,o=new Array;$.each(t,function(t,i){-1==a.indexOf(i.week)&&(a.push(i.week),e.push(i.sumTelecomTraffic),r.push(i.sumUnicomTraffic),o.push(i.sumMoveTraffic))});var i=echarts.init(document.getElementById("echarts_sim_average_month"),"macarons");option={title:{text:"\u5e73\u5747\u6d41\u91cf\uff08G\uff09"},tooltip:{trigger:"axis"},legend:{data:["\u4e2d\u56fd\u79fb\u52a8","\u4e2d\u56fd\u8054\u901a","\u4e2d\u56fd\u7535\u4fe1"]},toolbox:{show:!0,feature:{mark:{show:!1},dataView:{show:!1,readOnly:!1},magicType:{show:!1,type:["line","bar"]},restore:{show:!1},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!0,data:a}],yAxis:[{type:"value"}],series:[{name:"\u4e2d\u56fd\u79fb\u52a8",type:"bar",label:{normal:{show:!0,position:"top"}},data:o},{name:"\u4e2d\u56fd\u8054\u901a",type:"bar",label:{normal:{show:!0,position:"top"}},data:r},{name:"\u4e2d\u56fd\u7535\u4fe1",type:"bar",label:{normal:{show:!0,position:"top"}},data:e}]},i.setOption(option)},error:function(t,a,e){"timeout"==a&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(t){t.close()}}]})}})}function queryNothingTraffic(t){$.ajax({type:"post",url:"simStatistics/queryNothingTraffic.action",timeout:6e4,dataType:"json",data:t,success:function(t){var a="";a+='<table id="SIM_NothingTraffic">',a+="<thead><tr><th>\u5e8f\u53f7</th><th>ICCID</th><th>\u8fd0\u8425\u5546</th></thead>",a+="<tbody>",$.each(t,function(t,e){t=++t,a+="<tr><td>"+t+"</td><td>"+e.iccid+"</td><td>"+operatorCN(e.operator)+"</td>"}),a+="</tbody>",a+="</table>",$("#table-sim_NothingTraffic").html(a),$("#SIM_NothingTraffic").bootstrapTable({height:400,pagination:!1,sidePagination:"client",columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},error:function(t,a,e){"timeout"==a&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(t){t.close()}}]})}})}querySimStatus(),getRailwayBureau(),getOperator(),getNothingTraffic();var date=new Date,TempMonth=date.getMonth()+1;$("#serach_button").click(function(){querySimStatus("trainBureauId="+$("#RailwayBureau").val()+"&operator="+$("#Operator").val()+"&nothingTraffic="+$("#NothingTraffic").val())}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var a=$(t.target).text();$(t.relatedTarget).text();"SIM\u5361\u65b0\u589e\u7edf\u8ba1"==a&&(queryNewlyAddedSim(),queryAverageTracffic(),queryTrainTracfficScale(),queryNothingTraffic())}),$("#serach_button2").click(function(){TempMonth=parseInt($("#datetimeMonth").val().split("-")[1]);var t="";t="selectDate="+$("#datetimeMonth").val(),queryNewlyAddedSim(t),queryAverageTracffic(t),queryTrainTracfficScale(t),queryNothingTraffic(t)});var date=new Date;$("#datetimeMonth").val(new Date(date).format("yyyy-MM")),$(".datetimeMonth").datetimepicker({format:"yyyy-mm",autoclose:!0,startView:3,minView:3,forceParse:!1,language:"zh-CN"});