function yxxx_read(a){var e="";e="mac="+a,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"device/getDevInfo.action",dataType:"json",data:e,success:function(a){today=a.today,sevenDay=a.sevenDay,firstDayOfMonth=a.firstDayOfMonth;var l="";l+='<br><div class="container-fluid"><div class="panel panel-default"><div class="panel-heading"><label>\u8bbe\u5907\u57fa\u672c\u4fe1\u606f</label></div><div class="panel-body"><form class="form-horizontal" id="FormValidator">',l+='<div class="form-group"><label class="col-sm-2 control-label">\u8bbe\u5907\u578b\u53f7</label><div class="col-sm-3"><p class="form-control-static">'+a.devModel+'</p></div><label class="col-sm-2 control-label">\u8bbe\u5907MAC</label><div class="col-sm-3"><p class="form-control-static">'+a.mac+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u8bbe\u5907\u5382\u5546</label><div class="col-sm-3"><p class="form-control-static">'+a.devFactory+'</p></div><label class="col-sm-2 control-label">\u8bbe\u5907\u5e8f\u5217\u53f7</label><div class="col-sm-3"><p class="form-control-static">'+a.dev_sn+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u603b\u5185\u5b58</label><div class="col-sm-3"><p class="form-control-static">'+BToGb(a.total_memory)+'</p></div><label class="col-sm-2 control-label">SD\u5361\u5bb9\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+BToGb(a.total_sdcard)+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u603bPV</label><div class="col-sm-3"><p class="form-control-static">-</p></div><label class="col-sm-2 control-label">UV</label><div class="col-sm-3"><p class="form-control-static">-</p></div></div>',l+='<div class="form-group"><label class="col-sm-2 control-label">\u786c\u76d8\u5bb9\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+BToGb(a.total_disk)+"</p></div></div>",l+="</form></div></div></div>",l+='<br><div class="container-fluid"><div class="panel panel-default"><div class="panel-heading"><label>\u8bbe\u5907\u5b89\u88c5\u4fe1\u606f</label></div><div class="panel-body"><form class="form-horizontal" id="FormValidator">',l+='<div class="form-group"><label class="col-sm-2 control-label">\u5b89\u88c5\u914d\u5c5e\u5c40</label><div class="col-sm-3"><p class="form-control-static">'+a.bureauName+'</p></div><label class="col-sm-2 control-label">\u914d\u5c5e\u6bb5</label><div class="col-sm-3"><p class="form-control-static">'+a.stationName+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u8f66\u578b</label><div class="col-sm-3"><p class="form-control-static">'+a.lineModel+'</p></div><label class="col-sm-2 control-label">\u8f66\u6b21</label><div class="col-sm-3"><p class="form-control-static">'+a.lineName+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u8f66\u53f7</label><div class="col-sm-3"><p class="form-control-static">'+a.carriageName+'</p></div><label class="col-sm-2 control-label">\u8f66\u79cd</label><div class="col-sm-3"><p class="form-control-static">'+a.carriageType+"</p></div></div>",l+="</form></div></div></div>",l+='<br><div class="container-fluid"><div class="panel panel-default"><div class="panel-heading"><label>SIM\u4fe1\u606f</label></div><div class="panel-body"><form class="form-horizontal" id="FormValidator">',l+='<div class="form-group"><label class="col-sm-2 control-label">\u53611\u53f7</label><div class="col-sm-3"><p class="form-control-static">'+a.iccid1+'</p></div><label class="col-sm-2 control-label">\u53612\u53f7</label><div class="col-sm-3"><p class="form-control-static">'+a.iccid2+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u8fd0\u8425\u5546</label><div class="col-sm-3"><p class="form-control-static">\u4e2d\u56fd\u8054\u901a</p></div><label class="col-sm-2 control-label">\u8fd0\u8425\u5546</label><div class="col-sm-3"><p class="form-control-static">'+a.sim2Type+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u72b6\u6001</label><div class="col-sm-3"><p class="form-control-static">'+a.iccid1_status+'</p></div><label class="col-sm-2 control-label">\u72b6\u6001</label><div class="col-sm-3"><p class="form-control-static">'+a.iccid2_status+"</p></div></div>",l+="</form></div></div></div>",l+='<br><div class="container-fluid"><div class="panel panel-default"><div class="panel-heading"><label>\u8fd0\u884c\u4fe1\u606f</label></div><div class="panel-body"><form class="form-horizontal" id="FormValidator">',l+='<div class="form-group"><label class="col-sm-2 control-label">\u8bbe\u5907\u72b6\u6001</label><div class="col-sm-3"><p class="form-control-static">'+devAssetsStatusCN(a.devAssetsStatus)+'</p></div><label class="col-sm-2 control-label">\u5b89\u88c5\u72b6\u6001</label><div class="col-sm-3"><p class="form-control-static">'+isInstallCN(a.is_install)+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u8fd0\u884c\u72b6\u6001</label><div class="col-sm-3"><p class="form-control-static">'+a.devStatus+'</p></div><label class="col-sm-2 control-label">GPS\u4fe1\u606f</label><div class="col-sm-3"><p class="form-control-static">-</p></div></div>',l+='<div class="form-group"><label class="col-sm-2 control-label">\u8f6f\u4ef6\u7248\u672c</label><div class="col-sm-3"><p class="form-control-static">'+a.software_version+'</p></div><label class="col-sm-2 control-label">\u786c\u4ef6\u7248\u672c</label><div class="col-sm-3"><p class="form-control-static">'+a.hardware_version+"</p></div></div>",l+='<div class="form-group"><label class="col-sm-2 control-label">\u6700\u540e\u4e0a\u62a5\u65f6\u95f4</label><div class="col-sm-3"><p class="form-control-static">'+a.devCurrTime+"</p></div></div>",l+="</form></div></div></div>",$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devFlowInfo/queryDevTracfficTodaySevenDayMonth.action",dataType:"json",data:e,success:function(a){console.log(a);var e="";e+=l,e+='<br><div class="container-fluid"><div class="panel panel-default"><div class="panel-heading"><label>\u5f53\u5929\u6d41\u91cf('+today+')</label></div><div class="panel-body"><form class="form-horizontal" id="FormValidator">',e+='<div class="form-group"><label class="col-sm-2 control-label">\u7528\u6237\u7aef\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficToday.userTraffic)+'</p></div><label class="col-sm-2 control-label">\u540e\u7aef\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficToday.backendTraffic)+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u8054\u901a\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficToday.unicomTraffic)+'</p></div><label class="col-sm-2 control-label">\u7535\u4fe1\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficToday.telecomTraffic)+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u4e0a\u884c\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficToday.simTrafficTx)+'</p></div><label class="col-sm-2 control-label">\u4e0b\u884c\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficToday.simTrafficRx)+"</p></div></div>",e+="</form></div></div></div>",e+='<br><div class="container-fluid"><div class="panel panel-default"><div class="panel-heading"><label>\u4e03\u5929\u6d41\u91cf('+sevenDay+"-"+today+')</label></div><div class="panel-body"><form class="form-horizontal" id="FormValidator">',e+='<div class="form-group"><label class="col-sm-2 control-label">\u7528\u6237\u7aef\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficMonth.userTraffic)+'</p></div><label class="col-sm-2 control-label">\u540e\u7aef\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficMonth.backendTraffic)+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u8054\u901a\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficMonth.unicomTraffic)+'</p></div><label class="col-sm-2 control-label">\u7535\u4fe1\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficMonth.telecomTraffic)+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u4e0a\u884c\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficMonth.simTrafficTx)+'</p></div><label class="col-sm-2 control-label">\u4e0b\u884c\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficMonth.simTrafficRx)+"</p></div></div>",e+="</form></div></div></div>",e+='<br><div class="container-fluid"><div class="panel panel-default"><div class="panel-heading"><label>\u5f53\u6708\u6d41\u91cf('+firstDayOfMonth+"-"+today+')</label></div><div class="panel-body"><form class="form-horizontal" id="FormValidator">',e+='<div class="form-group"><label class="col-sm-2 control-label">\u7528\u6237\u7aef\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficSevenDay.userTraffic)+'</p></div><label class="col-sm-2 control-label">\u540e\u7aef\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficSevenDay.backendTraffic)+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u8054\u901a\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficSevenDay.unicomTraffic)+'</p></div><label class="col-sm-2 control-label">\u7535\u4fe1\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficSevenDay.telecomTraffic)+"</p></div></div>",e+='<div class="form-group"><label class="col-sm-2 control-label">\u4e0a\u884c\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficSevenDay.simTrafficTx)+'</p></div><label class="col-sm-2 control-label">\u4e0b\u884c\u6d41\u91cf</label><div class="col-sm-3"><p class="form-control-static">'+MToGb(a.tracfficSevenDay.simTrafficRx)+"</p></div></div>",e+="</form></div></div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u8bbe\u5907\u8be6\u60c5",message:e,onshown:function(a){},buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u8bbe\u5907\u6d41\u91cf\u8be6\u60c5\uff01")}})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u8bbe\u5907\u8be6\u60c5\uff01")}})}function yxxx_read2(a){TempDevMac=a;var e="";e="devMac="+a,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devRealtimeInfo/getDevIpmac.action",dataType:"json",data:e,success:function(a){var e="";e+='<table id="table-yxxx_read2">',e+="<thead><tr><th>\u5e8f\u53f7</th><th>devMac</th><th>\u7b2c\u4e00\u6b21\u8bb0\u5f55\u65f6\u95f4</th><th>\u6700\u540e\u4e00\u6b21\u8bb0\u5f55\u65f6\u95f4</th><th>\u7528\u6237 mac</th><th>\u7528\u6237\u624b\u673a\u53f7</th></tr></thead>",e+="<tbody>",$.each(a.rows,function(a,l){e+="<tr><td>"+(a+1)+"</td><td>"+l.devMac+"</td><td>"+l.firstRecTime+"</td><td>"+l.lastRecTime+"</td><td>"+l.mac+"</td><td>"+l.phone+"</td></tr>"}),e+="</tbody>",e+="</table>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u8fde\u63a5\u7528\u6237\u67e5\u770b",message:e,onshown:function(a){$("#table-yxxx_read2").bootstrapTable({pagination:!0,sidePagination:"client",pageSize:10,columns:[{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"},{align:"center",valign:"middle"}]})},buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff01")}})}function yxxx_read_wifi(a){$(".loading").show();var e="";e="devMac="+a+"&carType="+car_type,$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devIpMac/getTrainOrBusDeviceInstallDetail.action",dataType:"json",data:e,success:function(e){$(".loading").hide();var l="";1==car_type?(l+='<div class="row"><div class="col-sm-12"><div id="FormValidator"  class="form-horizontal">',l+='<div class="form-group"><div class="col-sm-3">\u8bbe\u5907SN\uff1a'+e.devMac+'</div><div class="col-sm-3">Portal\u7248\u672c\uff1a<span id="contentVerison"><i class="fa fa-spinner fa-spin"></i></span></div><div class="col-sm-3">\u8bbe\u5907\u5382\u5546\uff1a'+e.equBrand+'</div><div class="col-sm-3">\u7ebf\u8def\uff1a'+e.cbPathStart+"——"+e.cbPathEnd+"("+e.lineName+")</div></div>",l+='<div class="form-group"><div class="col-sm-6">\u6240\u5728\u8def\u5c40\uff1a'+e.bureauName+'</div><div class="col-sm-6">\u5f53\u65e5\u8bbe\u5907\u5728\u7ebf\u65f6\u957f\uff1a<span id="devOnline"><i class="fa fa-spinner fa-spin"></i></span></div></div>',l+='<div class="form-group"><div class="col-sm-6">\u5f53\u65e5\u7528\u6237\u7d2f\u8ba1\u5728\u7ebf\u65f6\u957f\uff1a<span id="totalConnectTime"><i class="fa fa-spinner fa-spin"></i></span></div><div class="col-sm-6">\u5f53\u65e5\u7528\u6237\u5e73\u5747\u5728\u7ebf\u65f6\u957f\uff1a<span id="avgConnectUserTime"><i class="fa fa-spinner fa-spin"></i></span></div></div>',l+="</div></div></div>"):2==car_type&&(l+='<div class="row"><div class="col-sm-12"><div id="FormValidator"  class="form-horizontal">',l+='<div class="form-group"><div class="col-sm-3">\u8bbe\u5907MAC\uff1a'+e.devMac+'</div><div class="col-sm-3">Portal\u7248\u672c\uff1a<span id="contentVerison"><i class="fa fa-spinner fa-spin"></i></span></div><div class="col-sm-3">\u8bbe\u5907\u5382\u5546\uff1a'+e.equBrand+'</div><div class="col-sm-3">\u8f66\u724c\uff1a'+e.cbPlateNum+"</div></div>",l+='<div class="form-group"><div class="col-sm-3">\u8f66\u8f86\u54c1\u724c\uff1a'+e.cbBrand+'</div><div class="col-sm-3">\u8f66\u8f86\u7c7b\u578b\uff1a'+e.cbTypeStr+'</div><div class="col-sm-3">\u7ebf\u8def\uff1a'+e.cbPathStart+"——"+e.cbPathEnd+"</div></div>",l+='<div class="form-group"><div class="col-sm-6">\u6240\u5728\u8fd0\u4f01\uff1a'+e.cbOrgName+'</div><div class="col-sm-6">\u5f53\u65e5\u8bbe\u5907\u5728\u7ebf\u65f6\u957f\uff1a<span id="devOnline"><i class="fa fa-spinner fa-spin"></i></span></div></div>',l+='<div class="form-group"><div class="col-sm-6">\u5f53\u65e5\u7528\u6237\u7d2f\u8ba1\u5728\u7ebf\u65f6\u957f\uff1a<span id="totalConnectTime"><i class="fa fa-spinner fa-spin"></i></span></div><div class="col-sm-6">\u5f53\u65e5\u7528\u6237\u5e73\u5747\u5728\u7ebf\u65f6\u957f\uff1a<span id="avgConnectUserTime"><i class="fa fa-spinner fa-spin"></i></span></div></div>',l+="</div></div></div>"),l+='<br><div class="row"><div class="col-sm-12">',l+='<div class="TempColSm1 col-sm-1"></div><div class="col-sm-4"><div id="echarts_UserFW" style="width: 100%;height:400px;"></div></div><div class="TempColSm1 col-sm-1"></div>',l+='<div id="Top10" style="display:none;"><div id="echarts_Mobile" style="width: 100%;height:400px;"></div></div><div id="col_br" class="col-sm-12" style="display:none;"><br></div>',l+='<div class="TempColSm1 col-sm-1"></div><div class="col-sm-4"><div id="echarts_lwt" style="width: 100%;height:220px;"></div><div id="echarts_ll" style="width: 100%;height:220px;"></div><div class="text-center">\u8bbe\u5907\u6d41\u91cf\u603b\u6d88\u8017\uff1a<span id="totalFlow"><i class="fa fa-spinner fa-spin"></i></span></div></div>',l+='<div id="echartsData" class="col-sm-8" style="display:none;"><div id="echarts_data" style="width: 100%;height:400px;"></div></div>',l+="</div></div>",BootstrapDialog.show({size:BootstrapDialog.SIZE_WIDE,title:"\u8be6\u60c5",message:l,cssClass:"FullScreen-dialog",onshown:function(e){function l(){if(getDevTodayConnectTraUserNum&&getDevHitUserNumInfo&&getDevAccessInfo&&getDevTodayConnectUserNum){var e=new Array,l=0,c="";clearInterval(i),$.each(t,function(a,t){$.each(o,function(a,e){t==e.name&&(c=e.name,l=e.value)}),e.push({value:l,name:t}),l=0,c=""}),option_UserFW={title:{text:"\u7528\u6237\u8bbf\u95ee",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}"},calculable:!0,series:[{name:"\u7528\u6237\u8bbf\u95ee",type:"funnel",label:{normal:{show:!0,formatter:"{b} :\n{c}",position:"top"}},data:e}]},s.hideLoading(),s.setOption(option_UserFW),s.on("click",function(e){Top10(a)})}}getDevTodayConnectTraUserNum=!1,getDevHitUserNumInfo=!1,getDevAccessInfo=!1,getDevTodayConnectUserNum=!1;var t=["\u8fde\u63a5\u7528\u6237\u6570","\u81ea\u5f39\u9875\u7528\u6237","\u8fdb\u5165\u9996\u9875\u7528\u6237","\u9a8c\u8bc1\u7801\u8bf7\u6c42\u7528\u6237","\u9a8c\u8bc1\u7801\u6210\u529f\u7528\u6237","\u4ea7\u751f\u6d41\u91cf\u7528\u6237"],o=new Array,s=echarts.init(document.getElementById("echarts_UserFW"),"macarons");s.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var i=setInterval(l,1e3),c="";c="devMac="+a,$.ajax({type:"post",url:"devRealtimeInfo/getDevRealtimeInfoDetail.action",data:c,dataType:"json",success:function(a){$("#contentVerison").html(a.contentVerison)}});var c="";c="devMacs="+a,$.ajax({type:"post",url:"devIpMac/selectTracfficByMacToday.action",data:c,dataType:"json",success:function(a){$("#devOnline").html(timemat(a.devOnline))}});var n=echarts.init(document.getElementById("echarts_ll"),"macarons");n.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var c="";c="devMac="+a,$.ajax({type:"post",url:"devIpMac/selectDeviceConnectInfo.action",data:c,dataType:"json",success:function(a){var e=0,l=0;null!=a?($("#totalConnectTime").html(timemat(a.totalConnectTime)),$("#avgConnectUserTime").html(timemat(a.avgConnectUserTime)),hostList=a.hostList,e=BToMb(a.userFlow).replace("MB",""),l=BToMb(a.serverFlow).replace("MB",""),$("#totalFlow").html(parseFloat(parseFloat(e)+parseFloat(l)).toFixed(2)+" MB")):($("#totalConnectTime").html("-"),$("#avgConnectUserTime").html("-"),$("#totalFlow").html("0 MB"));var t={title:{text:"\u6d41\u91cf\u6d88\u8017\u56fe",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"\u6d41\u91cf\u6d88\u8017",type:"pie",radius:["30%","50%"],data:[{value:e,name:"\u7528\u6237\u7aef"},{value:l,name:"\u670d\u52a1\u7aef"}]}]};n.hideLoading(),n.setOption(t)}});var c="";c="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevTodayConnectUserNum.action",data:c,dataType:"json",success:function(a){o.push({value:a,name:t[0]}),getDevTodayConnectUserNum=!0}});var c="";c="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevTodayConnectTraUserNum.action",data:c,dataType:"json",success:function(a){o.push({value:a,name:t[5]}),getDevTodayConnectTraUserNum=!0}});var c="";c="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevHitUserNumInfo.action",data:c,dataType:"json",success:function(a){$.each(a,function(a,e){switch(e.hitID){case"\u81ea\u5f39\u9875":o.push({value:e.counts,name:t[1]});break;case"\u83b7\u53d6\u9a8c\u8bc1\u7801\u70b9\u51fb":o.push({value:e.counts,name:t[3]});break;case"\u8ba4\u8bc1\u6210\u529f":o.push({value:e.counts,name:t[4]})}}),getDevHitUserNumInfo=!0}});var r=echarts.init(document.getElementById("echarts_lwt"),"macarons");r.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var c="";c="devMac="+a,$.ajax({type:"post",url:"devIpMac/getDevAccessInfo.action",data:c,dataType:"json",success:function(e){o.push({value:e.homePageCount,name:t[2]}),getDevAccessInfo=!0;var l={title:{text:"\u8fde\u7f51\u56fe",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}"},series:[{name:"\u8fde\u7f51\u56fe",type:"pie",radius:"45%",data:[{value:parseInt(e.insideCount),name:"\u5185\u7f51\u8bbf\u95ee\u4eba\u6570",label:{normal:{show:!0,formatter:"{b} :\n{c}",position:"top"}}},{value:parseInt(e.outsideCount),name:"\u5916\u7f51\u8bbf\u95ee\u4eba\u6570",label:{normal:{show:!0,formatter:"{b} :\n{c}",position:"top"}}}]}]};r.hideLoading(),r.setOption(l),r.on("click",function(e){"\u5185\u7f51\u8bbf\u95ee\u4eba\u6570"==e.name?NeiWang(a):"\u5916\u7f51\u8bbf\u95ee\u4eba\u6570"==e.name&&WaiWang(a)})}})},buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})},error:function(){$(".loading").hide(),errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u7528\u6237\u8fde\u63a5\u4fe1\u606f\uff01")}})}function Top10(a){$("#defaultCol").removeClass("col-sm-6").addClass("col-sm-4"),$("#col_br").show(),$(".TempColSm1").remove(),$("#Top10").addClass("col-sm-8").show();var e=echarts.init(document.getElementById("echarts_Mobile"),"macarons");e.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var l="";l="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevTodayConnectUser.action",data:l,dataType:"json",success:function(a){var l=[],t=[];$.each(a,function(a,e){l.push(a),t.push({name:a,type:"bar",data:[parseInt(e)],label:{normal:{show:!0,position:"top"}}})}),l=l.slice(0,10),t=t.slice(0,10),option={title:{text:"\u624b\u673a\u54c1\u724c\u8bbf\u95eeTOP10",x:"center"},tooltip:{trigger:"axis"},toolbox:{feature:{restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:l,bottom:"0px"},xAxis:[{type:"category",boundaryGap:!1,name:"\u624b\u673a\u54c1\u724c",data:[""]}],yAxis:[{type:"value",name:"\u4eba\u6570",axisLabel:{formatter:"{value}"}}],series:t},e.hideLoading(),e.setOption(option)}})}function NeiWang(a){$("#defaultCol").removeClass("col-sm-6").addClass("col-sm-4"),$("#col_br").show(),$(".TempColSm1").remove(),$("#echartsData").show();var e=echarts.init(document.getElementById("echarts_data"),"macarons");e.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var l="";l="devMacs="+a,$.ajax({type:"post",url:"devIpMac/getDevHitInfo.action",data:l,dataType:"json",success:function(a){var l=[],t=[];$.each(a,function(a,e){l.push(e.hitID),t.push({name:e.hitID,type:"bar",data:[parseInt(e.counts)],label:{normal:{show:!0,position:"top"}}})}),l=l.slice(0,10),t=t.slice(0,10),option={title:{text:"\u5185\u7f51\u9891\u9053\u8bbf\u95ee\u6b21\u6570",x:"center"},tooltip:{trigger:"axis"},toolbox:{feature:{restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:l,bottom:"0px"},xAxis:[{type:"category",boundaryGap:!1,name:"\u9891\u9053",data:[""]}],yAxis:[{type:"value",name:"\u8bbf\u95ee\u4eba\u6570",axisLabel:{formatter:"{value}"}}],series:t},e.hideLoading(),e.setOption(option)}})}function WaiWang(a){$("#defaultCol").removeClass("col-sm-6").addClass("col-sm-4"),$("#col_br").show(),$(".TempColSm1").remove(),$("#echartsData").show();var e=echarts.init(document.getElementById("echarts_data"),"macarons");e.showLoading({text:"\u6b63\u5728\u52aa\u529b\u7684\u8bfb\u53d6\u6570\u636e\u4e2d..."});var l=hostList.split("|"),t=[],o=[];$.each(l,function(a,e){e=e.split(","),t.push(e[0]),o.push({name:e[0],type:"bar",data:[parseInt(e[1])],label:{normal:{show:!0,position:"top"}}})}),t=t.slice(0,10),o=o.slice(0,10),option={title:{text:"TOP10\u5916\u7f51\u5730\u5740\u8bbf\u95ee\u6b21\u6570",x:"center"},tooltip:{trigger:"axis"},toolbox:{feature:{restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:t,bottom:"0px"},xAxis:[{type:"category",boundaryGap:!1,name:"\u9891\u9053",data:[""]}],yAxis:[{type:"value",name:"\u8bbf\u95ee\u4eba\u6570",axisLabel:{formatter:"{value}"}}],series:o},e.hideLoading(),e.setOption(option)}function yxxx_read_wifi2(a,e){layer.open({shadeClose:!0,title:"\u8be6\u60c5",type:2,area:["1250px","600px"],fix:!1,maxmin:!0,content:"plot.html?carType="+a+"&devMac="+e})}function getDeviceRealtimeInfoCount(){contentVerison=$("#ContentVerison").val(),hardVersion=$("#HardVersion").val(),realStatus=$("#RealStatus").val(),devMac=$("#DevMac").val(),null==car_type&&(car_type="");var a="";a="&contentVerison="+contentVerison+"&hardVersion="+hardVersion+"&realStatus="+realStatus+"&devMac="+devMac+"&car_type="+car_type,$("#devRealCountToday").html('<i class="fa fa-spinner fa-spin"></i>'),$("#wifiUsersNumCountToday").html('<i class="fa fa-spinner fa-spin"></i>'),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"devRealtimeInfo/getDeviceRealtimeInfoCount.action",timeout:6e4,dataType:"json",data:a,success:function(a){$("#devRealCountToday").html(a.devRealCountToday),$("#wifiUsersNumCountToday").html(a.wifiUsersNumCountToday)},error:function(a,e,l){"timeout"==e&&BootstrapDialog.show({title:"\u7cfb\u7edf\u63d0\u793a",message:"\u8bf7\u6c42\u8d85\u65f6\uff01",buttons:[{label:"\u5173\u95ed",action:function(a){a.close()}}]})}})}function queryParams_yxxx(a){var e="";"null"!=String($("#SoftVersion").val())&&(e=String($("#SoftVersion").val()));var l,t;if(""==$("#datetimeStart").val()&&""==$("#datetimeEnd").val()){var o=new Date;l=new Date(o).format("yyyy-MM-dd 00:00:00"),t=new Date(o).format("yyyy-MM-dd 23:59:59")}else l=$("#datetimeStart").val(),t=$("#datetimeEnd").val();var s={pageSize:a.limit,offset:a.offset,deviceCurTimeFrom:l,deviceCurTimeTo:t,trainBureauId:$("#RailwayBureau").val(),trainStationId:$("#RailwayStation").val(),trainShopId:$("#TrainShop").val(),contentVerison:$("#ContentVerison").val(),softVersion:e,hardVersion:$("#HardVersion").val(),realStatus:$("#RealStatus").val(),devMac:$("#DevMac").val(),devModel:$("#devModel").val(),car_type:car_type};return s}function queryParams_read2(a){var e={limit:a.limit,offset:a.offset,execJobId:ExecJobId,devMac:TempDevMac};return e}getDevModel();var hostList="",getDevTodayConnectTraUserNum,getDevHitUserNumInfo,getDevAccessInfo,getDevTodayConnectUserNum,$table=$("#table-yxxx");$table.bootstrapTable({method:"post",contentType:"application/x-www-form-urlencoded",url:"devRealtimeInfo/getDeviceRealtimeInfo.action",dataType:"json",striped:!0,toolbar:"#toolbar",uniqueId:"devClientVersionId",pagination:!0,singleSelect:!1,search:!1,sortable:!1,sidePagination:"server",queryParams:queryParams_yxxx,columns:[{title:"\u5e8f\u53f7",field:"id",align:"center",valign:"middle",formatter:function(a,e,l){return l+1}},{title:"\u5e8f\u5217\u53f7",field:"devMac",align:"center",valign:"middle",width:200,formatter:function(a,e,l){var t="";return t="1"==car_type?'<a href="javascript:void(0);" onclick="yxxx_read(\''+a+"');\">"+a+"</a>":a}},{title:"DMA\u7248\u672c",field:"softVersion",align:"center",valign:"middle",width:200},{title:"portal\u7248\u672c",field:"contentVerison",align:"center",valign:"middle"},{title:"\u786c\u4ef6\u7248\u672c",field:"hardVersion",align:"center",valign:"middle",width:200},{title:"GPS\u4fe1\u606f",field:"gpsCity",align:"center",valign:"middle",formatter:function(a,e,l){var t="";return t='<a href="map_train.html?carType='+e.car_type+"&GetMac="+e.devMac+'">\u67e5\u770b\u4f4d\u7f6e</a>'}},{title:"\u8bbe\u5907\u72b6\u6001",field:"devAssetsStatus",align:"center",valign:"middle",formatter:function(a,e,l){return"2"==car_type?"\u6b63\u5e38":devAssetsStatusCN(a)}},{title:"\u5b89\u88c5\u72b6\u6001",field:"isInstall",align:"center",valign:"middle",formatter:function(a,e,l){return"2"==car_type?"\u5b89\u88c5\u6b63\u5e38":isInstallCN(a)}},{title:"\u8bbe\u5907\u8fd0\u884c\u72b6\u6001",field:"realStatus",align:"center",valign:"middle",formatter:function(a,e,l){return null!=a?1==a?"\u5728\u7ebf":0==a?"\u79bb\u7ebf":a:"-"}},{title:"CPU\u4f7f\u7528\u7387",field:"cpuUsage",align:"center",valign:"middle",formatter:function(a,e,l){return a.indexOf("%")>-1&&parseInt(a.replace("%",""))>90&&(a="90%"),a}},{title:"\u5185\u5b58\u4f7f\u7528\u7387",field:"memoryUsage",align:"center",valign:"middle"},{title:"\u786c\u76d8\u4f7f\u7528\u7387",field:"diskUsage",align:"center",valign:"middle"},{title:"\u5f53\u65e5\u7d2f\u8ba1\u8fde\u63a5\u4eba\u6570",field:"wifiUsersNumCountCurTime",align:"center",valign:"middle",formatter:function(a,e,l){var t='<a href="javascript:void(0);" onclick="yxxx_read2(\''+e.devMac+"');\">"+a+"</a>";return t}},{title:"\u6700\u540e\u4e0a\u62a5\u65f6\u95f4",field:"deviceCurTime",align:"center",valign:"middle",formatter:function(a,e,l){return new Date(a.replace(/-/g,"/")).format("yyyy-MM-dd HH:mm:ss")}}]});var TempDevMac;getContentVerison(car_type),getSoftVersion(car_type),getDeviceRealtimeInfoCount(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayBureau.action",dataType:"json",success:function(a){$.each(a,function(a,e){$("#RailwayBureau").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u5c40\u4fe1\u606f\uff01")}}),$("#RailwayBureau").change(function(){if(""!=$(this).val()){var a="";a="trainBureauId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayStation.action",dataType:"json",data:a,success:function(a){$("#RailwayStation").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(a,function(a,e){$("#RailwayStation").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u6bb5\u4fe1\u606f\uff01")}})}else $("#RailwayStation").html('<option value="">\u9009\u62e9\u914d\u5c5e\u6bb5</option>'),$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#RailwayStation").change(function(){if(""!=$(this).val()){var a="";a="trainBureauId="+$("#RailwayBureau").val()+"&trainStationId="+$(this).val(),$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:"selectObject/getRailwayShop.action",dataType:"json",data:a,success:function(a){$("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$.each(a,function(a,e){$("#TrainShop").append('<option value="'+e.value+'">'+e.text+"</option>")}),$(".selectpicker").selectpicker("refresh")},error:function(){errorNotify(null,"\u65e0\u6cd5\u83b7\u53d6\u914d\u5c5e\u8f66\u95f4\u4fe1\u606f\uff01")}})}else $("#TrainShop").html('<option value="">\u9009\u62e9\u914d\u5c5e\u8f66\u95f4</option>'),$(".selectpicker").selectpicker("refresh")}),$("#serach_button").click(function(){getDeviceRealtimeInfoCount(),$("#table-yxxx").bootstrapTable("refresh")}),$("#yxxx_download").click(function(){deviceCurTimeFrom=$("#datetimeStart").val(),deviceCurTimeTo=$("#datetimeEnd").val(),contentVerison=$("#ContentVerison").val(),hardVersion=$("#HardVersion").val(),realStatus=$("#RealStatus").val(),devMac=$("#DevMac").val(),"null"!=String($("#SoftVersion").val())?softVersion=String($("#SoftVersion").val()):softVersion="",devModel=$("#devModel").val(),null==car_type&&(car_type=""),window.open("devRealtimeInfo/exportDeviceRealtimeInfo.action?deviceCurTimeFrom="+deviceCurTimeFrom+"&deviceCurTimeTo="+deviceCurTimeTo+"&contentVerison="+contentVerison+"&hardVersion="+hardVersion+"&realStatus="+realStatus+"&devMac="+devMac+"&softVersion="+softVersion+"&devModel="+devModel+"&car_type="+car_type)});var date=new Date,date=new Date;$("#datetimeStart").val(new Date(date).format("yyyy-MM-dd 00:00:00")),$("#datetimeEnd").val(new Date(date).format("yyyy-MM-dd 23:59:59")),$(".datetimeStart").datetimepicker({format:"yyyy-mm-dd hh:ii:00",autoclose:!0,minView:"hour",maxView:"decade",minuteStep:1,todayBtn:!0,language:"zh-CN"}).on("click",function(a){$(".datetimeStart").datetimepicker("setEndDate",$("#datetimeEnd").val())}),$(".datetimeEnd").datetimepicker({format:"yyyy-mm-dd hh:ii:59",autoclose:!0,minView:"hour",maxView:"decade",minuteStep:1,todayBtn:!0,language:"zh-CN"}).on("click",function(a){$(".datetimeEnd").datetimepicker("setStartDate",$("#datetimeStart").val())});